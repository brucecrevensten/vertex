use strict;
use warnings;
use Test::More;
use HTTP::Request::Common;
use Data::Dumper;
use Apache2::Const q(:http);
use URSA2::SearchRequest;
use Catalyst::Test 'URSA2';
use JSON;

our( $E1_assets, $E2_J1_assets, $file_list1, $file_list2, $file_list_json, $broken_json);

#
# test descriptions can be found in spreadsheet linked at http://wiki.asf.alaska.edu/asf/Ursa2SearchApiSpec
#

#
# Note!  These tests are pretty stupid-simple -- they compare returns
# from the database against hardcoded strings.  This works,
# but is sensitive to changes in the database.
#
# If tests blow up when you run them fresh from svn, or if Jenkins starts
# to freak out, check to see what the actual database results are.
#

my $surn = 'services/search/param'; # urn of the service were testing
my $jurn = 'services/search/json'; # urn of the service were testing

my $bbox = '-135,65.99,-134.99,66';
my @platforms = (q(R1 E1 E2 J1 A3));
my @startdates = (
'1985-04-12T23:20:50.52Z',
'1996-12-19T16:39:57-08:00',
'1990-12-31T23:59:60Z',
'1990-12-31T15:59:60-08:00',
'1937-01-01T12:00:27.87+00:20');
my @enddates = (
'1985-05-12T23:20:50.52Z',
'1997-01-19T16:39:57-08:00',
'1991-01-20T23:59:60Z',
'1991-01-22T15:59:60-08:00',
'1937-02-01T12:00:27.87+00:20');
my @granules = (q(R1_35587_SWB_F356 R1_34558_SWB_F356 R1_34601_SWB_F357));

# Sequence of tests against the controller as mediated through HTTP

BEGIN { use_ok 'URSA2::Controller::services' }
use ok "Test::WWW::Mechanize::Catalyst" => "URSA2";

my $mech = Test::WWW::Mechanize::Catalyst->new(catalyst_app => 'URSA2', autolint => 0);

###### doesn't need DB connections
$mech->get_ok('services', "1.1: web service exists");

$mech->post($surn);
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1: get HTTP 400 for missing bbox field');

$mech->get($surn, { bbox => 'invalid'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1.2: get HTTP 400 for missing bbox field');

$mech->get($jurn, { query => '{"bbox":"invalid"}'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1.2: get HTTP 400 for missing bbox field');

$mech->post($surn, { bbox => '-165,656-164,67' } );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1.2: get HTTP 400 for invalid bbox field');

$mech->get($surn, { bbox => '1,2,3'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1.2: get HTTP 400 for invalid bbox field');

$mech->get($jurn, { query => '{"bbox":"1,2,3"}'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1.2: get HTTP 400 for invalid bbox field');

$mech->get($surn, { bbox => '1.111,2.22222,0,4.444a'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1.2: get HTTP 400 for invalid bbox field');

$mech->get($jurn, { query => '{"bbox":"1.111,2.22222,0,4.444a"}'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.1.2: get HTTP 400 for missing bbox field');

$mech->post($surn, { processing => 'L1,browse' });
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '3.2.2: get HTTP 400 for missing bbox field when other parameters are present');

$mech->post($jurn, { query => '{"processing":["L1","browse"]}' });
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '3.2.2, 2.11: get HTTP 400 for missing bbox field when other parameters are present');

$mech->post($surn, { bbox=>$bbox, platform => 'BadPlatform'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.2: get HTTP 400 for invalid platform');

$mech->post($jurn, { query => '{"bbox":"-135,64.5,-135.1,64.6","platform":["BadPlatform"]}'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.2, 2.11: get HTTP 400 for missing bbox field when other parameters are present');

$mech->post($surn, { bbox=>$bbox, start => 'BadDate'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.3: get HTTP 400 for invalid start date field');

$mech->post($jurn, { query => '{"bbox":"-135,64.5,-135.1,64.6","start":["BadDate"]}'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.3, 2.11: get HTTP 400 for missing bbox field when other parameters are present');

$mech->post($surn, { bbox=>$bbox, end => 'BadDate'} );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.4: get HTTP 400 for invalid end date field');

$mech->post($jurn, { query => '{"bbox":"-135,64.5,-135.1,64.6","end":["BadDate"]}'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.4, 2.11: get HTTP 400 for missing bbox field when other parameters are present');

$mech->post($surn, { bbox=>$bbox, processing => 'BadProcessing'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.6: get HTTP 400 for invalid processing level field');

$mech->post($jurn, { query => '{"bbox":"-135,64.5,-135.1,64.6","processing":["BadProcessing"]}'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.6, 2.11: get HTTP 400 for missing bbox field when other parameters are present');

$mech->post($surn, { bbox=>$bbox, beam => 'BadBeam' });
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.7: get HTTP 400 for invalid beam mode field');

$mech->post($jurn, { query => '{"bbox":"-135,64.5,-135.1,64.6","beam":["BadBeam"]}'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.7, 2.11: get HTTP 400 for bad beam mode');

$mech->post($surn, { 'bbox' => '-135,64.5,-135.1,64.6', format => 'invalid' } );
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.5: check that invalid format request responds with error');

$mech->post($jurn, { query => '{"bbox":"-135,64.5,-135.1,64.6","format":"invalid"}'});
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.5, 2.11: get HTTP 400 for invalid format request');

$mech->post($jurn, { query => $broken_json });
is($mech->status(), Apache2::Const::HTTP_BAD_REQUEST, '2.11.3: broken JSON returns a 400');

###### needs DB connections
SKIP: {
  skip 'not testing features requiring a database connection', 34, unless $ENV{TEST_DATABASE};

  $mech->post_ok($surn, { granule_list => 'R1_63549_ST1_F165,R1_65186_ST3_F291', processing => 'any', format=>'list' });
  is($mech->content(), 'R1_63549_ST1_F165,R1_65186_ST3_F291,R1_63549_ST1_F165,R1_65186_ST3_F291,R1_63549_ST1_F165,R1_65186_ST3_F291,',
    'DE506: API should accept parameter "any" for processing type');

  $mech->post_ok($surn, { frame => '200' }, '2.15.1: fetching by frame makes bbox optional');
  $mech->post_ok($surn, { path => '200' }, '2.16.1: fetching by path makes bbox optional');

#TODO: add better (more specific) tests for this
#  $mech->post_ok($surn, { path => '200-204,254,105-108,606' }, '2.16: fetching by path ranges');
#  $mech->post_ok($surn, { frame => '200-204,255,305-308,402' }, '2.16: fetching by frame ranges');

  #TODO: match these explicitly against a result set
#  $mech->post_ok($surn, { platform=>'E1', frame=>'287', format=>'list' }, 'testing OK response for searching by frame');
#  $mech->post_ok($surn, { platform=>'R2', direction=>'ascending', format=>'list' }, 'testing OK response for searching by direction');
#  $mech->post_ok($surn, { platform=>'A3', path=>'1234', format=>'list' }, 'testing OK response for searching via a single path');

  #TODO: match these explicitly against a result set
  $mech->get_ok($surn.'?products='.$file_list1.'&format=list','testing OK response for fetching file list via GET');
  $mech->post_ok($surn, { products => $file_list2, format=>'list' }, 'testing OK response for fetching file list via POST');
  $mech->post_ok($surn, { query => $file_list_json }, 'testing OK response for fetching file list via JSON POST');

  $mech->post_ok($surn, { bbox=>$bbox }, '2.1: server accepts comma-separated bbox param');
  like($mech->content(), qr/.metalink./, '2.5: checking default fallback to metalink format');

  $mech->post_ok($surn, { granule_list => 'R1_63549_ST1_F165,R1_65186_ST3_F291', format => 'json', processing => 'L0' });
  my $json = from_json( $mech->content() );
  my $f = 1;
  foreach my $g ( @{$json->{'rows'}}) {
    if ( $g->{'PROCESSINGTYPE'} ne 'L0' ) {
      $f = 0;
    }
  }
  is($f, 1, 'TC1127: specifying processing level only returns items with that processing level');

  $mech->post_ok($surn, {granule_list=>'R1_35587_SWB_F356,R1_34558_SWB_F356,R1_34601_SWB_F357'}, 'checking fetching explicit granule list');
  like($mech->content(), qr/metalink/, '2.5: checking default fallback to metalink format with explicit granule list');
  like($mech->content(), qr/.+/, '3.2.1: if granule_list is provided, no other parameters are required');

  $mech->post($surn, { bbox=>$bbox, end=>'1927-01-01' });
  is($mech->status(), Apache2::Const::HTTP_NO_CONTENT, '3.1: get HTTP 204 for no search results with specified constraints');
  
  $mech->post($surn, { granule_list=>'R1_65186_ST3_F291', format=>'csv'});
  is($mech->status(), Apache2::Const::HTTP_OK, '3: get HTTP 200 for successful search');
  is($mech->content(), q~"Granule Name","Platform","Sensor","Beam Mode","Beam Mode Description","Orbit","Path Number","Frame Number","Acquisition Date","Processing Date","Processing Level","Start Time","End Time","Center Lat","Center Lon","Near Start Lat","Near Start Lon","Far Start Lat","Far Start Lon","Near End Lat","Near End Lon","Far End Lat","Far End Lon","Faraday Rotation","Ascending or Descending?","URL","Size (MB)","Off Nadir Angle",
"R1_65186_ST3_F291","RADARSAT-1","SAR","ST3","Radarsat-1 Standard Beam 3 SAR","65186","NA","291","2008-04-30 16:24:27","2010-11-06 11:47:31","L0","2008-04-30 16:24:11","2008-04-30 16:24:27","63.5168","-148.9877","63.9072","-147.7297","62.9501","-148.2432","64.078","-149.7645","63.1172","-150.2114","NA","DESCENDING","http://test-online.asf.alaska.edu:80/L0/R1/R1_65186_ST3_L0_F291.zip","136.91","NA",
"R1_65186_ST3_F291","RADARSAT-1","SAR","ST3","Radarsat-1 Standard Beam 3 SAR","65186","NA","291","2008-04-30 16:24:27","2010-11-06 11:48:50","BROWSE","2008-04-30 16:24:11","2008-04-30 16:24:27","63.5168","-148.9877","63.9072","-147.7297","62.9501","-148.2432","64.078","-149.7645","63.1172","-150.2114","NA","DESCENDING","http://test-online.asf.alaska.edu:80/BROWSE/R1/R1_65186_ST3_F291.jpg",".4","NA",
"R1_65186_ST3_F291","RADARSAT-1","SAR","ST3","Radarsat-1 Standard Beam 3 SAR","65186","NA","291","2008-04-30 16:24:27","2010-11-06 11:49:34","L1","2008-04-30 16:24:11","2008-04-30 16:24:27","63.5168","-148.9877","63.9072","-147.7297","62.9501","-148.2432","64.078","-149.7645","63.1172","-150.2114","NA","DESCENDING","http://test-online.asf.alaska.edu:80/L1/R1/R1_65186_ST3_F291.zip","50.5","NA",~
, '3: get expected results for specific granule list, test explicit CSV format structure');

  $mech->post($surn, { granule_list=>',R1_65186_ST3_F291, E1_00404_STD_F161,,', format=>'list'});
  is($mech->status(), Apache2::Const::HTTP_OK, '3: get HTTP 200 for successful search');
  is($mech->content(), qq(E1_00404_STD_F161,E1_00404_STD_F161,E1_00404_STD_F161,R1_65186_ST3_F291,R1_65186_ST3_F291,R1_65186_ST3_F291,), '3: get expected results for slightly weird granule list (extra spaces and commas)');

  # testing search restriction by platform: this region definitely has E1, E2, JERS, R1 assets.
  $mech->post_ok($surn, { 'bbox' => '-135,54,-134,55', platform => 'E1', format=>'list' } );
  is($mech->content(), q(E1_25395_STD_F313,E1_25395_STD_F313,E1_25395_STD_F313,E1_25395_STD_F311,E1_25395_STD_F311,E1_25395_STD_F311,E1_25352_STD_F315,E1_25352_STD_F315,E1_25352_STD_F315,E1_25352_STD_F313,E1_25352_STD_F313,E1_25352_STD_F313,E1_25209_STD_F313,E1_25209_STD_F313,E1_25209_STD_F313,E1_25123_STD_F316,E1_25123_STD_F316,E1_25123_STD_F316,E1_25123_STD_F315,E1_25123_STD_F315,E1_25123_STD_F315,E1_25123_STD_F313,E1_25123_STD_F313,E1_25123_STD_F313,E1_25123_STD_F311,E1_25123_STD_F311,E1_25123_STD_F311,E1_25080_STD_F315,E1_25080_STD_F315,E1_25080_STD_F315,E1_25080_STD_F313,E1_25080_STD_F313,E1_25080_STD_F313,E1_24729_STD_F139,E1_24729_STD_F139,E1_24729_STD_F139,E1_24729_STD_F137,E1_24729_STD_F137,E1_24729_STD_F137,E1_24729_STD_F135,E1_24729_STD_F135,E1_24729_STD_F135,E1_24579_STD_F313,E1_24579_STD_F313,E1_24579_STD_F313,E1_24121_STD_F316,E1_24121_STD_F316,E1_24121_STD_F316,E1_24121_STD_F315,E1_24121_STD_F315,E1_24121_STD_F315,E1_24121_STD_F314,E1_24121_STD_F314,E1_24121_STD_F313,E1_24121_STD_F313,E1_24121_STD_F313,E1_24121_STD_F312,E1_24121_STD_F312,E1_24121_STD_F311,E1_24121_STD_F311,E1_24121_STD_F311,E1_24078_STD_F315,E1_24078_STD_F315,E1_24078_STD_F313,E1_24078_STD_F313,E1_23434_STD_F313,E1_23434_STD_F313,E1_23434_STD_F313,E1_23434_STD_F311,E1_23434_STD_F311,E1_23434_STD_F311,E1_23076_STD_F315,E1_23076_STD_F315,E1_23076_STD_F315,E1_23076_STD_F313,E1_23076_STD_F313,E1_23076_STD_F313,E1_22661_STD_F311,E1_22661_STD_F311,E1_22661_STD_F311,E1_22389_STD_F312,E1_22389_STD_F312,E1_22389_STD_F311,E1_22389_STD_F311,E1_22389_STD_F311,E1_21845_STD_F316,E1_21845_STD_F316,E1_21845_STD_F316,E1_21845_STD_F315,E1_21845_STD_F315,E1_21845_STD_F315,E1_21845_STD_F313,E1_21845_STD_F313,E1_21845_STD_F313,E1_21616_STD_F315,E1_21616_STD_F315,E1_21616_STD_F315,E1_21616_STD_F313,E1_21616_STD_F313,E1_21616_STD_F313,E1_21616_STD_F311,E1_21616_STD_F311,E1_21616_STD_F311,E1_21408_STD_F137,E1_21408_STD_F137,E1_21408_STD_F137,E1_21222_STD_F139,E1_21222_STD_F139,E1_21222_STD_F139,E1_21222_STD_F137,E1_21222_STD_F137,E1_21222_STD_F137,E1_20929_STD_F312,E1_20929_STD_F312,E1_20929_STD_F311,E1_20929_STD_F311,E1_20929_STD_F311,E1_20657_STD_F313,E1_20657_STD_F313,E1_20657_STD_F313,E1_20657_STD_F311,E1_20657_STD_F311,E1_20657_STD_F311,E1_20614_STD_F315,E1_20614_STD_F315,E1_20614_STD_F313,E1_20614_STD_F313,E1_20614_STD_F311,E1_20614_STD_F311,E1_20571_STD_F315,E1_20571_STD_F315,E1_20571_STD_F313,E1_20571_STD_F313,E1_20492_STD_F137,E1_20492_STD_F137,E1_20492_STD_F137,E1_20492_STD_F135,E1_20492_STD_F135,E1_20492_STD_F135,E1_19884_STD_F314,E1_19884_STD_F314,E1_19884_STD_F314,E1_19884_STD_F313,E1_19884_STD_F313,E1_19884_STD_F313,E1_19884_STD_F311,E1_19884_STD_F311,E1_19884_STD_F311,E1_19841_STD_F316,E1_19841_STD_F316,E1_19841_STD_F316,E1_19841_STD_F315,E1_19841_STD_F315,E1_19841_STD_F315,E1_19841_STD_F313,E1_19841_STD_F313,E1_19841_STD_F313,E1_19569_STD_F315,E1_19569_STD_F315,E1_19569_STD_F315,E1_19569_STD_F313,E1_19569_STD_F313,E1_19569_STD_F313,E1_19426_STD_F312,E1_19426_STD_F312,E1_19426_STD_F311,E1_19426_STD_F311,E1_19426_STD_F311,E1_19383_STD_F314,E1_19383_STD_F314,E1_19383_STD_F314,E1_19383_STD_F313,E1_19383_STD_F313,E1_19383_STD_F313,E1_19383_STD_F312,E1_19383_STD_F312,E1_19383_STD_F311,E1_19383_STD_F311,E1_19383_STD_F311,E1_19340_STD_F316,E1_19340_STD_F316,E1_19340_STD_F316,E1_19340_STD_F315,E1_19340_STD_F315,E1_19340_STD_F315,E1_19340_STD_F313,E1_19340_STD_F313,E1_19340_STD_F313,E1_19168_STD_F314,E1_19168_STD_F314,E1_19125_STD_F315,E1_19125_STD_F315,E1_19125_STD_F315,E1_19125_STD_F313,E1_19125_STD_F313,E1_19125_STD_F313,E1_19125_STD_F311,E1_19125_STD_F311,E1_19125_STD_F311,E1_19082_STD_F312,E1_19082_STD_F312,E1_19082_STD_F311,E1_19082_STD_F311,E1_19082_STD_F311,E1_18551_STD_F313,E1_18551_STD_F313,E1_18551_STD_F313,E1_18551_STD_F312,E1_18551_STD_F312,E1_18551_STD_F311,E1_18551_STD_F311,E1_18551_STD_F311,E1_18350_STD_F315,E1_18350_STD_F315,E1_18350_STD_F315,E1_18350_STD_F313,E1_18350_STD_F313,E1_18350_STD_F313,E1_17776_STD_F314,E1_17776_STD_F314,E1_17776_STD_F314,E1_17776_STD_F313,E1_17776_STD_F313,E1_17776_STD_F313,E1_17776_STD_F311,E1_17776_STD_F311,E1_17776_STD_F311,E1_17733_STD_F313,E1_17733_STD_F313,E1_17733_STD_F313,E1_17733_STD_F311,E1_17733_STD_F311,E1_17733_STD_F311,E1_17532_STD_F315,E1_17532_STD_F315,E1_17532_STD_F315,E1_17532_STD_F313,E1_17532_STD_F313,E1_17532_STD_F313,E1_17489_STD_F316,E1_17489_STD_F316,E1_17489_STD_F316,E1_17489_STD_F315,E1_17489_STD_F315,E1_17489_STD_F315,E1_17489_STD_F313,E1_17489_STD_F313,E1_17489_STD_F313,E1_17489_STD_F311,E1_17489_STD_F311,E1_17489_STD_F311,E1_17446_STD_F313,E1_17446_STD_F313,E1_17446_STD_F313,E1_17446_STD_F312,E1_17446_STD_F312,E1_17446_STD_F311,E1_17446_STD_F311,E1_17446_STD_F311,E1_17245_STD_F312,E1_17245_STD_F312,E1_17245_STD_F312,E1_17245_STD_F311,E1_17245_STD_F311,E1_17245_STD_F311,E1_16915_STD_F315,E1_16915_STD_F315,E1_16915_STD_F315,E1_16915_STD_F313,E1_16915_STD_F313,E1_16915_STD_F313,E1_16915_STD_F311,E1_16915_STD_F311,E1_16915_STD_F311,E1_16671_STD_F315,E1_16671_STD_F315,E1_16671_STD_F315,E1_16671_STD_F313,E1_16671_STD_F313,E1_16671_STD_F313,E1_16671_STD_F311,E1_16671_STD_F311,E1_16671_STD_F311,E1_16140_STD_F315,E1_16140_STD_F315,E1_16140_STD_F315,E1_16140_STD_F313,E1_16140_STD_F313,E1_16140_STD_F313,E1_16140_STD_F311,E1_16140_STD_F311,E1_16140_STD_F311,E1_14834_STD_F314,E1_14834_STD_F314,E1_14834_STD_F314,E1_14834_STD_F313,E1_14834_STD_F313,E1_14834_STD_F313,E1_14834_STD_F311,E1_14834_STD_F311,E1_14834_STD_F311,E1_12841_STD_F314,E1_12841_STD_F314,E1_12841_STD_F314,E1_12841_STD_F313,E1_12841_STD_F313,E1_12841_STD_F313,E1_12483_STD_F316,E1_12483_STD_F316,E1_12483_STD_F316,E1_12483_STD_F315,E1_12483_STD_F315,E1_12483_STD_F315,E1_12483_STD_F313,E1_12483_STD_F313,E1_12483_STD_F313,E1_12211_STD_F315,E1_12211_STD_F315,E1_12211_STD_F315,E1_12211_STD_F313,E1_12211_STD_F313,E1_12211_STD_F313,E1_12025_STD_F314,E1_12025_STD_F314,E1_12025_STD_F314,E1_12025_STD_F313,E1_12025_STD_F313,E1_12025_STD_F313,E1_12025_STD_F311,E1_12025_STD_F311,E1_12025_STD_F311,E1_11982_STD_F316,E1_11982_STD_F316,E1_11982_STD_F316,E1_11982_STD_F315,E1_11982_STD_F315,E1_11982_STD_F315,E1_11982_STD_F313,E1_11982_STD_F313,E1_11982_STD_F313,E1_11753_STD_F315,E1_11753_STD_F315,E1_11753_STD_F315,E1_11753_STD_F313,E1_11753_STD_F313,E1_11753_STD_F313,E1_11753_STD_F311,E1_11753_STD_F311,E1_11753_STD_F311,E1_11567_STD_F313,E1_11567_STD_F313,E1_11567_STD_F313,E1_11567_STD_F311,E1_11567_STD_F311,E1_11567_STD_F311,E1_11524_STD_F315,E1_11524_STD_F315,E1_11524_STD_F315,E1_11524_STD_F313,E1_11524_STD_F313,E1_11524_STD_F313,E1_11524_STD_F311,E1_11524_STD_F311,E1_11524_STD_F311,E1_11481_STD_F315,E1_11481_STD_F315,E1_11481_STD_F315,E1_11481_STD_F313,E1_11481_STD_F313,E1_11481_STD_F313,E1_11295_STD_F313,E1_11295_STD_F313,E1_11295_STD_F313,E1_11295_STD_F311,E1_11295_STD_F311,E1_11295_STD_F311,E1_11252_STD_F315,E1_11252_STD_F315,E1_11252_STD_F315,E1_11252_STD_F313,E1_11252_STD_F313,E1_11252_STD_F313,E1_11252_STD_F311,E1_11252_STD_F311,E1_11252_STD_F311,E1_11209_STD_F315,E1_11209_STD_F315,E1_11209_STD_F315,E1_11209_STD_F313,E1_11209_STD_F313,E1_11209_STD_F313,E1_11066_STD_F312,E1_11066_STD_F312,E1_11066_STD_F312,E1_11066_STD_F311,E1_11066_STD_F311,E1_11066_STD_F311,E1_11023_STD_F314,E1_11023_STD_F314,E1_11023_STD_F314,E1_11023_STD_F313,E1_11023_STD_F313,E1_11023_STD_F313,E1_11023_STD_F311,E1_11023_STD_F311,E1_11023_STD_F311,E1_10980_STD_F316,E1_10980_STD_F316,E1_10980_STD_F316,E1_10980_STD_F315,E1_10980_STD_F315,E1_10980_STD_F315,E1_10980_STD_F313,E1_10980_STD_F313,E1_10980_STD_F313,E1_10794_STD_F314,E1_10794_STD_F314,E1_10794_STD_F314,E1_10794_STD_F313,E1_10794_STD_F313,E1_10794_STD_F313,E1_10794_STD_F311,E1_10794_STD_F311,E1_10794_STD_F311,E1_10751_STD_F315,E1_10751_STD_F315,E1_10751_STD_F315,E1_10751_STD_F313,E1_10751_STD_F313,E1_10751_STD_F313,E1_10751_STD_F311,E1_10751_STD_F311,E1_10751_STD_F311,E1_10708_STD_F315,E1_10708_STD_F315,E1_10708_STD_F315,E1_10708_STD_F313,E1_10708_STD_F313,E1_10708_STD_F313,E1_10565_STD_F313,E1_10565_STD_F313,E1_10565_STD_F313,E1_10565_STD_F311,E1_10565_STD_F311,E1_10565_STD_F311,E1_10293_STD_F313,E1_10293_STD_F313,E1_10293_STD_F313,E1_10293_STD_F311,E1_10293_STD_F311,E1_10293_STD_F311,E1_10250_STD_F315,E1_10250_STD_F315,E1_10250_STD_F315,E1_10250_STD_F313,E1_10250_STD_F313,E1_10250_STD_F313,E1_10250_STD_F311,E1_10250_STD_F311,E1_10250_STD_F311,E1_10207_STD_F315,E1_10207_STD_F315,E1_10207_STD_F315,E1_10207_STD_F313,E1_10207_STD_F313,E1_10207_STD_F313,E1_10064_STD_F312,E1_10064_STD_F312,E1_10064_STD_F312,E1_10064_STD_F311,E1_10064_STD_F311,E1_10064_STD_F311,E1_10021_STD_F314,E1_10021_STD_F314,E1_10021_STD_F314,E1_10021_STD_F313,E1_10021_STD_F313,E1_10021_STD_F313,E1_10021_STD_F311,E1_10021_STD_F311,E1_10021_STD_F311,E1_09978_STD_F316,E1_09978_STD_F316,E1_09978_STD_F316,E1_09978_STD_F315,E1_09978_STD_F315,E1_09978_STD_F315,E1_09978_STD_F313,E1_09978_STD_F313,E1_09978_STD_F313,E1_09792_STD_F314,E1_09792_STD_F314,E1_09792_STD_F314,E1_09792_STD_F313,E1_09792_STD_F313,E1_09792_STD_F313,E1_09792_STD_F311,E1_09792_STD_F311,E1_09792_STD_F311,E1_09749_STD_F315,E1_09749_STD_F315,E1_09749_STD_F315,E1_09749_STD_F313,E1_09749_STD_F313,E1_09749_STD_F313,E1_09749_STD_F311,E1_09749_STD_F311,E1_09749_STD_F311,E1_09706_STD_F315,E1_09706_STD_F315,E1_09706_STD_F315,E1_09706_STD_F313,E1_09706_STD_F313,E1_09706_STD_F313,E1_09563_STD_F313,E1_09563_STD_F313,E1_09563_STD_F313,E1_09563_STD_F311,E1_09563_STD_F311,E1_09563_STD_F311,E1_09520_STD_F315,E1_09520_STD_F315,E1_09520_STD_F315,E1_09520_STD_F313,E1_09520_STD_F313,E1_09520_STD_F313,E1_09520_STD_F311,E1_09520_STD_F311,E1_09520_STD_F311,E1_09477_STD_F315,E1_09477_STD_F315,E1_09477_STD_F315,E1_09477_STD_F313,E1_09477_STD_F313,E1_09477_STD_F313,E1_09355_STD_F139,E1_09355_STD_F139,E1_09355_STD_F139,E1_09355_STD_F137,E1_09355_STD_F137,E1_09355_STD_F137,E1_09355_STD_F135,E1_09355_STD_F135,E1_09355_STD_F135,E1_09355_STD_F134,E1_09355_STD_F134,E1_09355_STD_F134,E1_09291_STD_F313,E1_09291_STD_F313,E1_09291_STD_F313,E1_09291_STD_F311,E1_09291_STD_F311,E1_09291_STD_F311,E1_09248_STD_F315,E1_09248_STD_F315,E1_09248_STD_F315,E1_09248_STD_F313,E1_09248_STD_F313,E1_09248_STD_F313,E1_09248_STD_F311,E1_09248_STD_F311,E1_09248_STD_F311,E1_09205_STD_F315,E1_09205_STD_F315,E1_09205_STD_F315,E1_09205_STD_F313,E1_09205_STD_F313,E1_09205_STD_F313,E1_08976_STD_F315,E1_08976_STD_F315,E1_08976_STD_F315,E1_08976_STD_F313,E1_08976_STD_F313,E1_08976_STD_F313,E1_08790_STD_F314,E1_08790_STD_F314,E1_08790_STD_F314,E1_08790_STD_F313,E1_08790_STD_F313,E1_08790_STD_F313,E1_08790_STD_F311,E1_08790_STD_F311,E1_08790_STD_F311,E1_08747_STD_F315,E1_08747_STD_F315,E1_08747_STD_F315,E1_08747_STD_F313,E1_08747_STD_F313,E1_08747_STD_F313,E1_08747_STD_F311,E1_08747_STD_F311,E1_08747_STD_F311,E1_08518_STD_F315,E1_08518_STD_F315,E1_08518_STD_F315,E1_08518_STD_F313,E1_08518_STD_F313,E1_08518_STD_F313,E1_08518_STD_F311,E1_08518_STD_F311,E1_08518_STD_F311,E1_08475_STD_F315,E1_08475_STD_F315,E1_08475_STD_F315,E1_08475_STD_F313,E1_08475_STD_F313,E1_08475_STD_F313,E1_08289_STD_F314,E1_08289_STD_F314,E1_08289_STD_F314,E1_08289_STD_F313,E1_08289_STD_F313,E1_08289_STD_F313,E1_08289_STD_F311,E1_08289_STD_F311,E1_08289_STD_F311,E1_08203_STD_F315,E1_08203_STD_F315,E1_08203_STD_F315,E1_08203_STD_F313,E1_08203_STD_F313,E1_08203_STD_F313,E1_08060_STD_F315,E1_08060_STD_F315,E1_08060_STD_F315,E1_08060_STD_F313,E1_08060_STD_F313,E1_08060_STD_F313,E1_08060_STD_F311,E1_08060_STD_F311,E1_08060_STD_F311,E1_08017_STD_F315,E1_08017_STD_F315,E1_08017_STD_F315,E1_08017_STD_F313,E1_08017_STD_F313,E1_08017_STD_F313,E1_08017_STD_F311,E1_08017_STD_F311,E1_08017_STD_F311,E1_07745_STD_F315,E1_07745_STD_F315,E1_07745_STD_F315,E1_07745_STD_F313,E1_07745_STD_F313,E1_07745_STD_F313,E1_07745_STD_F311,E1_07745_STD_F311,E1_07745_STD_F311,E1_07559_STD_F315,E1_07559_STD_F315,E1_07559_STD_F315,E1_07559_STD_F313,E1_07559_STD_F313,E1_07559_STD_F313,E1_07559_STD_F311,E1_07559_STD_F311,E1_07559_STD_F311,E1_07516_STD_F315,E1_07516_STD_F315,E1_07516_STD_F315,E1_07516_STD_F313,E1_07516_STD_F313,E1_07516_STD_F313,E1_07516_STD_F311,E1_07516_STD_F311,E1_07516_STD_F311,E1_07473_STD_F315,E1_07473_STD_F315,E1_07473_STD_F315,E1_07473_STD_F313,E1_07473_STD_F313,E1_07473_STD_F313,E1_07287_STD_F315,E1_07287_STD_F315,E1_07287_STD_F315,E1_07287_STD_F313,E1_07287_STD_F313,E1_07287_STD_F313,E1_07287_STD_F311,E1_07287_STD_F311,E1_07287_STD_F311,E1_07244_STD_F315,E1_07244_STD_F315,E1_07244_STD_F315,E1_07244_STD_F313,E1_07244_STD_F313,E1_07244_STD_F313,E1_07244_STD_F311,E1_07244_STD_F311,E1_07244_STD_F311,E1_06972_STD_F315,E1_06972_STD_F315,E1_06972_STD_F315,E1_06972_STD_F313,E1_06972_STD_F313,E1_06972_STD_F313,E1_06786_STD_F314,E1_06786_STD_F314,E1_06786_STD_F314,E1_06786_STD_F313,E1_06786_STD_F313,E1_06786_STD_F313,E1_06786_STD_F311,E1_06786_STD_F311,E1_06786_STD_F311,E1_06743_STD_F315,E1_06743_STD_F315,E1_06743_STD_F315,E1_06743_STD_F313,E1_06743_STD_F313,E1_06743_STD_F313,E1_06743_STD_F311,E1_06743_STD_F311,E1_06743_STD_F311,E1_06700_STD_F315,E1_06700_STD_F315,E1_06700_STD_F315,E1_06700_STD_F314,E1_06700_STD_F314,E1_06700_STD_F313,E1_06700_STD_F313,E1_06700_STD_F313,E1_06557_STD_F313,E1_06557_STD_F313,E1_06557_STD_F313,E1_06557_STD_F311,E1_06557_STD_F311,E1_06557_STD_F311,E1_06471_STD_F315,E1_06471_STD_F315,E1_06471_STD_F315,E1_06471_STD_F313,E1_06471_STD_F313,E1_06471_STD_F313,E1_06328_STD_F313,E1_06328_STD_F313,E1_06328_STD_F313,E1_06242_STD_F315,E1_06242_STD_F315,E1_06242_STD_F315,E1_06242_STD_F313,E1_06242_STD_F313,E1_06242_STD_F313,E1_06242_STD_F311,E1_06242_STD_F311,E1_06242_STD_F311,E1_05970_STD_F315,E1_05970_STD_F315,E1_05970_STD_F315,E1_05970_STD_F313,E1_05970_STD_F313,E1_05970_STD_F313,E1_05741_STD_F315,E1_05741_STD_F315,E1_05741_STD_F315,E1_05741_STD_F313,E1_05741_STD_F313,E1_05741_STD_F313,E1_05741_STD_F311,E1_05741_STD_F311,E1_05741_STD_F311,E1_05698_STD_F315,E1_05698_STD_F315,E1_05698_STD_F315,E1_05698_STD_F313,E1_05698_STD_F313,E1_05698_STD_F313,E1_05576_STD_F139,E1_05576_STD_F139,E1_05576_STD_F139,E1_05576_STD_F137,E1_05576_STD_F137,E1_05576_STD_F137,E1_05576_STD_F135,E1_05576_STD_F135,E1_05576_STD_F135,E1_05555_STD_F313,E1_05555_STD_F313,E1_05555_STD_F313,E1_05555_STD_F311,E1_05555_STD_F311,E1_05555_STD_F311,E1_05512_STD_F315,E1_05512_STD_F315,E1_05512_STD_F315,E1_05512_STD_F313,E1_05512_STD_F313,E1_05512_STD_F313,E1_05512_STD_F311,E1_05512_STD_F311,E1_05512_STD_F311,E1_05469_STD_F315,E1_05469_STD_F315,E1_05469_STD_F315,E1_05469_STD_F313,E1_05469_STD_F313,E1_05469_STD_F313,E1_05347_STD_F139,E1_05347_STD_F139,E1_05347_STD_F139,E1_05347_STD_F137,E1_05347_STD_F137,E1_05347_STD_F137,E1_05347_STD_F136,E1_05347_STD_F136,E1_05347_STD_F136,E1_05240_STD_F312,E1_05240_STD_F312,E1_05240_STD_F312,E1_05240_STD_F311,E1_05240_STD_F311,E1_05240_STD_F311,E1_05054_STD_F313,E1_05054_STD_F313,E1_05054_STD_F313,E1_05054_STD_F311,E1_05054_STD_F311,E1_05054_STD_F311,E1_04825_STD_F313,E1_04825_STD_F313,E1_04825_STD_F313,E1_04803_STD_F139,E1_04803_STD_F139,E1_04803_STD_F139,E1_04803_STD_F137,E1_04803_STD_F137,E1_04803_STD_F137,E1_04803_STD_F136,E1_04803_STD_F136,E1_04803_STD_F136,E1_04782_STD_F315,E1_04782_STD_F315,E1_04782_STD_F315,E1_04782_STD_F313,E1_04782_STD_F313,E1_04782_STD_F313,E1_04782_STD_F311,E1_04782_STD_F311,E1_04782_STD_F311,E1_04739_STD_F316,E1_04739_STD_F316,E1_04739_STD_F315,E1_04739_STD_F315,E1_04739_STD_F315,E1_04739_STD_F314,E1_04739_STD_F314,E1_04739_STD_F313,E1_04739_STD_F313,E1_04739_STD_F313,E1_04739_STD_F312,E1_04739_STD_F312,E1_04739_STD_F311,E1_04739_STD_F311,E1_04739_STD_F311,E1_04696_STD_F315,E1_04696_STD_F315,E1_04696_STD_F315,E1_04696_STD_F313,E1_04696_STD_F313,E1_04696_STD_F313,E1_04510_STD_F311,E1_04510_STD_F311,E1_04510_STD_F311,E1_04467_STD_F315,E1_04467_STD_F315,E1_04467_STD_F315,E1_04467_STD_F313,E1_04467_STD_F313,E1_04467_STD_F313,E1_04238_STD_F312,E1_04238_STD_F312,E1_04238_STD_F312,E1_04238_STD_F311,E1_04238_STD_F311,E1_04238_STD_F311,E1_04195_STD_F315,E1_04195_STD_F315,E1_04195_STD_F315,E1_04195_STD_F313,E1_04195_STD_F313,E1_04195_STD_F313,E1_03479_STD_F315,E1_03479_STD_F315,E1_03479_STD_F315,E1_03479_STD_F313,E1_03479_STD_F313,E1_03479_STD_F313,E1_03479_STD_F311,E1_03479_STD_F311,E1_03479_STD_F311,),
    '2.2, 3.7: check for filtering search results by a single platform type' );

  # testing search restriction by multiple platforms: this region definitely has E1, E2, JERS, R1 assets.
  $mech->post_ok($surn, { 'bbox' => '-135,54,-134,55', platform => 'J1,E2', format => 'list' } );
  is($mech->content(), q(E2_81373_STD_F316,E2_81373_STD_F316,E2_81373_STD_F316,E2_81373_STD_F315,E2_81373_STD_F315,E2_81373_STD_F315,E2_81373_STD_F313,E2_81373_STD_F313,E2_81373_STD_F313,E2_81373_STD_F311,E2_81373_STD_F311,E2_81208_STD_F137,E2_81208_STD_F137,E2_81208_STD_F135,E2_81208_STD_F135,E2_80872_STD_F316,E2_80872_STD_F316,E2_80872_STD_F316,E2_80872_STD_F315,E2_80872_STD_F315,E2_80872_STD_F315,E2_80872_STD_F313,E2_80872_STD_F313,E2_80872_STD_F313,E2_80872_STD_F311,E2_80872_STD_F311,E2_80829_STD_F315,E2_80829_STD_F315,E2_80829_STD_F315,E2_80829_STD_F313,E2_80829_STD_F313,E2_80829_STD_F313,E2_80686_STD_F313,E2_80686_STD_F313,E2_80686_STD_F313,E2_80664_STD_F139,E2_80664_STD_F139,E2_80664_STD_F139,E2_80664_STD_F137,E2_80664_STD_F137,E2_80664_STD_F135,E2_80664_STD_F135,E2_80664_STD_F135,E2_80643_STD_F314,E2_80643_STD_F314,E2_80643_STD_F313,E2_80643_STD_F313,E2_80643_STD_F311,E2_80643_STD_F311,E2_80600_STD_F315,E2_80600_STD_F315,E2_80600_STD_F315,E2_80600_STD_F313,E2_80600_STD_F313,E2_80600_STD_F313,E2_80600_STD_F311,E2_80600_STD_F311,E2_80478_STD_F137,E2_80478_STD_F137,E2_80478_STD_F137,E2_80478_STD_F135,E2_80478_STD_F135,E2_80478_STD_F135,E2_80478_STD_F134,E2_80478_STD_F134,E2_80478_STD_F134,E2_80414_STD_F314,E2_80414_STD_F314,E2_80414_STD_F314,E2_80414_STD_F313,E2_80414_STD_F313,E2_80414_STD_F313,E2_80414_STD_F311,E2_80414_STD_F311,E2_80414_STD_F311,E2_80371_STD_F316,E2_80371_STD_F316,E2_80371_STD_F316,E2_80371_STD_F315,E2_80371_STD_F315,E2_80371_STD_F315,E2_80371_STD_F313,E2_80371_STD_F313,E2_80371_STD_F313,E2_80371_STD_F311,E2_80371_STD_F311,E2_80328_STD_F315,E2_80328_STD_F315,E2_80328_STD_F315,E2_80328_STD_F313,E2_80328_STD_F313,E2_80328_STD_F313,E2_80185_STD_F313,E2_80185_STD_F313,E2_80185_STD_F313,E2_80142_STD_F314,E2_80142_STD_F314,E2_80142_STD_F314,E2_80142_STD_F313,E2_80142_STD_F313,E2_80142_STD_F313,E2_80142_STD_F311,E2_80142_STD_F311,E2_80142_STD_F311,E2_80099_STD_F315,E2_80099_STD_F315,E2_80099_STD_F315,E2_80099_STD_F313,E2_80099_STD_F313,E2_80099_STD_F313,E2_80099_STD_F311,E2_80099_STD_F311,E2_79934_STD_F139,E2_79934_STD_F139,E2_79934_STD_F139,E2_79934_STD_F137,E2_79934_STD_F137,E2_79934_STD_F137,E2_79934_STD_F135,E2_79934_STD_F135,E2_79934_STD_F135,E2_79913_STD_F315,E2_79913_STD_F315,E2_79913_STD_F315,E2_79913_STD_F313,E2_79913_STD_F313,E2_79913_STD_F313,E2_79913_STD_F311,E2_79913_STD_F311,E2_79913_STD_F311,E2_79827_STD_F315,E2_79827_STD_F315,E2_79827_STD_F315,E2_79827_STD_F313,E2_79827_STD_F313,E2_79827_STD_F313,E2_75926_STD_F139,E2_75926_STD_F139,E2_75926_STD_F139,E2_75926_STD_F137,E2_75926_STD_F137,E2_75926_STD_F137,E2_75862_STD_F316,E2_75862_STD_F316,E2_75862_STD_F316,E2_75862_STD_F315,E2_75862_STD_F315,E2_75862_STD_F315,E2_75862_STD_F313,E2_75862_STD_F313,E2_75862_STD_F313,E2_75862_STD_F311,E2_75862_STD_F311,E2_75862_STD_F311,E2_75819_STD_F315,E2_75819_STD_F315,E2_75819_STD_F315,E2_75819_STD_F313,E2_75819_STD_F313,E2_75819_STD_F313,E2_75590_STD_F316,E2_75590_STD_F316,E2_75590_STD_F316,E2_75590_STD_F315,E2_75590_STD_F315,E2_75590_STD_F315,E2_75590_STD_F313,E2_75590_STD_F313,E2_75590_STD_F313,E2_75590_STD_F311,E2_75590_STD_F311,E2_75590_STD_F311,E2_75132_STD_F314,E2_75132_STD_F314,E2_75132_STD_F314,E2_75132_STD_F313,E2_75132_STD_F313,E2_75132_STD_F313,E2_75132_STD_F311,E2_75132_STD_F311,E2_75132_STD_F311,E2_74817_STD_F315,E2_74817_STD_F315,E2_74817_STD_F315,E2_74817_STD_F313,E2_74817_STD_F313,E2_74817_STD_F313,E2_74316_STD_F315,E2_74316_STD_F315,E2_74316_STD_F315,E2_74316_STD_F313,E2_74316_STD_F313,E2_74316_STD_F313,E2_74151_STD_F139,E2_74151_STD_F139,E2_74151_STD_F137,E2_74151_STD_F137,E2_74151_STD_F135,E2_74151_STD_F135,E2_73858_STD_F314,E2_73858_STD_F314,E2_73858_STD_F313,E2_73858_STD_F313,E2_73858_STD_F313,E2_73858_STD_F311,E2_73858_STD_F311,E2_73858_STD_F311,E2_73629_STD_F314,E2_73629_STD_F314,E2_73629_STD_F314,E2_73629_STD_F313,E2_73629_STD_F313,E2_73629_STD_F313,E2_73629_STD_F311,E2_73629_STD_F311,E2_73629_STD_F311,E2_73586_STD_F316,E2_73586_STD_F316,E2_73586_STD_F316,E2_73586_STD_F315,E2_73586_STD_F315,E2_73586_STD_F315,E2_73586_STD_F313,E2_73586_STD_F313,E2_73586_STD_F313,E2_73586_STD_F311,E2_73586_STD_F311,E2_73586_STD_F311,E2_73543_STD_F315,E2_73543_STD_F315,E2_73543_STD_F315,E2_73543_STD_F313,E2_73543_STD_F313,E2_73543_STD_F313,E2_73128_STD_F314,E2_73128_STD_F314,E2_73128_STD_F313,E2_73128_STD_F313,E2_73128_STD_F313,E2_73128_STD_F311,E2_73128_STD_F311,E2_73128_STD_F311,E2_72398_STD_F311,E2_72398_STD_F311,E2_72312_STD_F315,E2_72312_STD_F315,E2_72312_STD_F315,E2_72312_STD_F313,E2_72312_STD_F313,E2_72312_STD_F313,E2_72190_STD_F139,E2_72190_STD_F139,E2_72190_STD_F139,E2_72190_STD_F138,E2_72190_STD_F138,E2_72190_STD_F137,E2_72190_STD_F137,E2_72190_STD_F137,E2_72190_STD_F136,E2_72190_STD_F136,E2_72190_STD_F135,E2_72190_STD_F135,E2_72190_STD_F135,E2_72190_STD_F134,E2_72190_STD_F134,E2_72190_STD_F134,E2_72083_STD_F316,E2_72083_STD_F316,E2_72083_STD_F316,E2_72083_STD_F315,E2_72083_STD_F315,E2_72083_STD_F315,E2_72083_STD_F314,E2_72083_STD_F314,E2_72083_STD_F313,E2_72083_STD_F313,E2_72083_STD_F313,E2_72083_STD_F312,E2_72083_STD_F312,E2_72083_STD_F311,E2_72083_STD_F311,E2_72083_STD_F311,E2_72040_STD_F314,E2_72040_STD_F314,E2_71918_STD_F139,E2_71918_STD_F139,E2_71918_STD_F139,E2_71918_STD_F137,E2_71918_STD_F137,E2_71918_STD_F137,E2_71918_STD_F135,E2_71918_STD_F135,E2_71918_STD_F135,E2_71854_STD_F314,E2_71854_STD_F314,E2_71854_STD_F313,E2_71854_STD_F313,E2_71854_STD_F313,E2_71854_STD_F312,E2_71854_STD_F312,E2_71854_STD_F311,E2_71854_STD_F311,E2_71854_STD_F311,E2_71811_STD_F316,E2_71811_STD_F316,E2_71811_STD_F315,E2_71811_STD_F315,E2_71811_STD_F315,E2_71811_STD_F314,E2_71811_STD_F314,E2_71811_STD_F313,E2_71811_STD_F313,E2_71811_STD_F313,E2_71811_STD_F312,E2_71811_STD_F312,E2_71625_STD_F315,E2_71625_STD_F315,E2_71625_STD_F315,E2_71625_STD_F314,E2_71625_STD_F314,E2_71625_STD_F313,E2_71625_STD_F313,E2_71625_STD_F313,E2_71625_STD_F312,E2_71625_STD_F312,E2_71625_STD_F311,E2_71625_STD_F311,E2_71625_STD_F311,E2_71582_STD_F316,E2_71582_STD_F316,E2_71582_STD_F316,E2_71582_STD_F315,E2_71582_STD_F315,E2_71582_STD_F315,E2_71582_STD_F314,E2_71582_STD_F314,E2_71582_STD_F313,E2_71582_STD_F313,E2_71582_STD_F313,E2_71582_STD_F312,E2_71582_STD_F312,E2_71582_STD_F311,E2_71582_STD_F311,E2_71582_STD_F311,E2_71396_STD_F311,E2_71396_STD_F311,E2_71396_STD_F311,E2_71353_STD_F314,E2_71353_STD_F314,E2_71353_STD_F313,E2_71353_STD_F313,E2_71353_STD_F313,E2_71353_STD_F311,E2_71353_STD_F311,E2_71353_STD_F311,E2_71310_STD_F315,E2_71310_STD_F315,E2_71310_STD_F315,E2_71310_STD_F313,E2_71310_STD_F313,E2_71310_STD_F313,E2_71188_STD_F139,E2_71188_STD_F139,E2_71188_STD_F139,E2_71124_STD_F315,E2_71124_STD_F315,E2_71124_STD_F315,E2_71124_STD_F313,E2_71124_STD_F313,E2_71124_STD_F313,E2_71124_STD_F311,E2_71124_STD_F311,E2_71124_STD_F311,E2_71081_STD_F315,E2_71081_STD_F315,E2_71081_STD_F315,E2_71081_STD_F313,E2_71081_STD_F313,E2_71081_STD_F313,E2_70916_STD_F139,E2_70916_STD_F139,E2_70916_STD_F139,E2_70916_STD_F137,E2_70916_STD_F137,E2_70916_STD_F137,E2_70916_STD_F135,E2_70916_STD_F135,E2_70916_STD_F135,E2_70623_STD_F312,E2_70623_STD_F312,E2_70623_STD_F311,E2_70623_STD_F311,E2_70623_STD_F311,E2_70580_STD_F316,E2_70580_STD_F316,E2_70580_STD_F316,E2_70580_STD_F315,E2_70580_STD_F315,E2_70580_STD_F315,E2_70580_STD_F313,E2_70580_STD_F313,E2_70580_STD_F313,E2_70394_STD_F311,E2_70394_STD_F311,E2_70394_STD_F311,E2_70372_STD_F136,E2_70372_STD_F136,E2_70351_STD_F314,E2_70351_STD_F314,E2_70351_STD_F313,E2_70351_STD_F313,E2_70351_STD_F313,E2_70351_STD_F311,E2_70351_STD_F311,E2_70351_STD_F311,E2_70122_STD_F312,E2_70122_STD_F312,E2_70122_STD_F311,E2_70122_STD_F311,E2_70122_STD_F311,E2_70079_STD_F316,E2_70079_STD_F316,E2_70079_STD_F316,E2_70079_STD_F315,E2_70079_STD_F315,E2_70079_STD_F315,E2_70079_STD_F313,E2_70079_STD_F313,E2_70079_STD_F313,E2_69914_STD_F139,E2_69914_STD_F139,E2_69914_STD_F139,E2_69914_STD_F138,E2_69914_STD_F138,E2_69914_STD_F137,E2_69914_STD_F137,E2_69914_STD_F137,E2_69914_STD_F136,E2_69914_STD_F136,E2_69914_STD_F135,E2_69914_STD_F135,E2_69914_STD_F135,E2_69914_STD_F134,E2_69914_STD_F134,E2_69850_STD_F314,E2_69850_STD_F314,E2_69850_STD_F313,E2_69850_STD_F313,E2_69850_STD_F313,E2_69850_STD_F311,E2_69850_STD_F311,E2_69850_STD_F311,E2_69642_STD_F139,E2_69642_STD_F139,E2_69642_STD_F139,E2_69642_STD_F137,E2_69642_STD_F137,E2_69642_STD_F137,E2_69642_STD_F135,E2_69642_STD_F135,E2_69642_STD_F135,E2_69578_STD_F316,E2_69578_STD_F316,E2_69578_STD_F316,E2_69578_STD_F315,E2_69578_STD_F315,E2_69578_STD_F315,E2_69578_STD_F313,E2_69578_STD_F313,E2_69578_STD_F313,E2_69370_STD_F137,E2_69370_STD_F137,E2_69370_STD_F137,E2_69349_STD_F314,E2_69349_STD_F314,E2_69349_STD_F313,E2_69349_STD_F313,E2_69349_STD_F313,E2_69349_STD_F311,E2_69349_STD_F311,E2_69349_STD_F311,E2_69306_STD_F315,E2_69306_STD_F315,E2_69306_STD_F315,E2_69306_STD_F313,E2_69306_STD_F313,E2_69306_STD_F313,E2_69184_STD_F139,E2_69184_STD_F139,E2_69120_STD_F311,E2_69120_STD_F311,E2_68912_STD_F139,E2_68912_STD_F139,E2_68912_STD_F139,E2_68912_STD_F138,E2_68912_STD_F138,E2_68912_STD_F138,E2_68891_STD_F313,E2_68891_STD_F313,E2_68891_STD_F312,E2_68891_STD_F312,E2_68891_STD_F311,E2_68891_STD_F311,E2_68891_STD_F311,E2_68848_STD_F315,E2_68848_STD_F315,E2_68848_STD_F314,E2_68848_STD_F314,E2_68848_STD_F312,E2_68848_STD_F312,E2_68805_STD_F316,E2_68805_STD_F316,E2_68805_STD_F315,E2_68805_STD_F315,E2_68805_STD_F315,E2_68805_STD_F314,E2_68805_STD_F314,E2_68805_STD_F313,E2_68805_STD_F313,E2_68805_STD_F313,E2_68454_STD_F138,E2_68454_STD_F138,E2_68454_STD_F137,E2_68454_STD_F137,E2_68454_STD_F137,E2_68454_STD_F136,E2_68454_STD_F136,E2_68454_STD_F136,E2_68390_STD_F313,E2_68390_STD_F313,E2_68390_STD_F312,E2_68390_STD_F312,E2_68368_STD_F137,E2_68368_STD_F137,E2_68347_STD_F315,E2_68347_STD_F315,E2_68347_STD_F315,E2_68347_STD_F314,E2_68347_STD_F314,E2_68347_STD_F313,E2_68347_STD_F313,E2_68347_STD_F313,E2_68347_STD_F312,E2_68347_STD_F312,E2_68347_STD_F311,E2_68347_STD_F311,E2_68347_STD_F311,E2_68304_STD_F315,E2_68304_STD_F315,E2_68304_STD_F315,E2_68304_STD_F313,E2_68304_STD_F313,E2_68304_STD_F313,E2_68075_STD_F316,E2_68075_STD_F316,E2_68075_STD_F314,E2_68075_STD_F314,E2_68075_STD_F312,E2_68075_STD_F312,E2_67889_STD_F313,E2_67889_STD_F313,E2_67889_STD_F311,E2_67889_STD_F311,E2_67846_STD_F315,E2_67846_STD_F315,E2_67846_STD_F315,E2_67846_STD_F313,E2_67846_STD_F313,E2_67846_STD_F313,E2_67846_STD_F311,E2_67846_STD_F311,E2_67846_STD_F311,E2_67638_STD_F139,E2_67638_STD_F139,E2_67638_STD_F137,E2_67638_STD_F137,E2_67638_STD_F135,E2_67638_STD_F135,E2_67617_STD_F313,E2_67617_STD_F313,E2_67617_STD_F311,E2_67617_STD_F311,E2_67180_STD_F139,E2_67180_STD_F139,E2_67180_STD_F139,E2_67116_STD_F313,E2_67116_STD_F313,E2_67116_STD_F313,E2_67116_STD_F311,E2_67116_STD_F311,E2_67116_STD_F311,E2_64632_STD_F139,E2_64632_STD_F139,E2_64632_STD_F139,E2_64632_STD_F137,E2_64632_STD_F137,E2_64632_STD_F137,E2_64632_STD_F135,E2_64632_STD_F135,E2_64632_STD_F135,E2_63358_STD_F137,E2_63358_STD_F137,E2_63358_STD_F137,E2_48808_STD_F312,E2_48808_STD_F312,E2_48808_STD_F312,E2_48808_STD_F311,E2_48808_STD_F311,E2_48808_STD_F311,E2_48765_STD_F315,E2_48765_STD_F315,E2_48765_STD_F315,E2_48765_STD_F313,E2_48765_STD_F313,E2_48765_STD_F313,E2_48536_STD_F312,E2_48536_STD_F312,E2_48536_STD_F312,E2_48536_STD_F311,E2_48536_STD_F311,E2_48536_STD_F311,E2_48307_STD_F315,E2_48307_STD_F315,E2_48307_STD_F315,E2_48307_STD_F313,E2_48307_STD_F313,E2_48307_STD_F313,E2_48307_STD_F311,E2_48307_STD_F311,E2_48307_STD_F311,E2_48264_STD_F312,E2_48264_STD_F312,E2_48264_STD_F312,E2_48078_STD_F315,E2_48078_STD_F315,E2_48078_STD_F315,E2_48078_STD_F313,E2_48078_STD_F313,E2_48078_STD_F313,E2_48078_STD_F311,E2_48078_STD_F311,E2_48078_STD_F311,E2_47992_STD_F315,E2_47992_STD_F315,E2_47992_STD_F315,E2_47992_STD_F313,E2_47992_STD_F313,E2_47992_STD_F313,E2_47763_STD_F315,E2_47763_STD_F315,E2_47763_STD_F315,E2_47763_STD_F313,E2_47763_STD_F313,E2_47763_STD_F313,E2_47305_STD_F315,E2_47305_STD_F315,E2_47305_STD_F315,E2_47305_STD_F313,E2_47305_STD_F313,E2_47305_STD_F313,E2_47305_STD_F311,E2_47305_STD_F311,E2_47305_STD_F311,E2_47262_STD_F315,E2_47262_STD_F315,E2_47262_STD_F315,E2_47262_STD_F313,E2_47262_STD_F313,E2_47262_STD_F313,E2_47119_STD_F313,E2_47119_STD_F313,E2_47119_STD_F313,E2_47076_STD_F315,E2_47076_STD_F315,E2_47076_STD_F315,E2_47076_STD_F313,E2_47076_STD_F313,E2_47076_STD_F313,E2_47076_STD_F311,E2_47076_STD_F311,E2_47076_STD_F311,E2_47033_STD_F315,E2_47033_STD_F315,E2_47033_STD_F315,E2_47033_STD_F313,E2_47033_STD_F313,E2_47033_STD_F313,E2_47033_STD_F311,E2_47033_STD_F311,E2_47033_STD_F311,E2_46761_STD_F315,E2_46761_STD_F315,E2_46761_STD_F315,E2_46761_STD_F313,E2_46761_STD_F313,E2_46761_STD_F313,E2_46532_STD_F315,E2_46532_STD_F315,E2_46532_STD_F315,E2_46532_STD_F313,E2_46532_STD_F313,E2_46532_STD_F313,E2_46532_STD_F311,E2_46532_STD_F311,E2_46532_STD_F311,E2_46303_STD_F312,E2_46303_STD_F312,E2_46303_STD_F312,E2_46303_STD_F311,E2_46303_STD_F311,E2_46303_STD_F311,E2_46260_STD_F315,E2_46260_STD_F315,E2_46260_STD_F315,E2_46260_STD_F313,E2_46260_STD_F313,E2_46260_STD_F313,E2_46117_STD_F314,E2_46117_STD_F314,E2_46117_STD_F313,E2_46117_STD_F313,E2_46117_STD_F313,E2_46074_STD_F312,E2_46074_STD_F312,E2_46074_STD_F311,E2_46074_STD_F311,E2_45845_STD_F315,E2_45845_STD_F315,E2_45845_STD_F315,E2_45845_STD_F313,E2_45845_STD_F313,E2_45845_STD_F313,E2_45845_STD_F311,E2_45845_STD_F311,E2_45845_STD_F311,E2_45802_STD_F315,E2_45802_STD_F315,E2_45802_STD_F315,E2_45802_STD_F313,E2_45802_STD_F313,E2_45802_STD_F313,E2_45802_STD_F311,E2_45802_STD_F311,E2_45802_STD_F311,E2_45759_STD_F315,E2_45759_STD_F315,E2_45759_STD_F315,E2_45759_STD_F313,E2_45759_STD_F313,E2_45759_STD_F313,E2_45573_STD_F312,E2_45573_STD_F312,E2_45573_STD_F312,E2_45573_STD_F311,E2_45573_STD_F311,E2_45573_STD_F311,E2_45530_STD_F315,E2_45530_STD_F315,E2_45530_STD_F315,E2_45530_STD_F313,E2_45530_STD_F313,E2_45530_STD_F313,E2_45530_STD_F311,E2_45530_STD_F311,E2_45530_STD_F311,E2_45301_STD_F315,E2_45301_STD_F315,E2_45301_STD_F315,E2_45301_STD_F313,E2_45301_STD_F313,E2_45301_STD_F313,E2_45301_STD_F311,E2_45301_STD_F311,E2_45301_STD_F311,E2_45258_STD_F315,E2_45258_STD_F315,E2_45258_STD_F315,E2_45258_STD_F313,E2_45258_STD_F313,E2_45258_STD_F313,E2_45072_STD_F315,E2_45072_STD_F315,E2_45072_STD_F315,E2_45072_STD_F313,E2_45072_STD_F313,E2_45072_STD_F313,E2_45072_STD_F311,E2_45072_STD_F311,E2_45072_STD_F311,E2_45029_STD_F315,E2_45029_STD_F315,E2_45029_STD_F315,E2_45029_STD_F313,E2_45029_STD_F313,E2_45029_STD_F313,E2_45029_STD_F311,E2_45029_STD_F311,E2_45029_STD_F311,E2_44571_STD_F315,E2_44571_STD_F315,E2_44571_STD_F315,E2_44571_STD_F313,E2_44571_STD_F313,E2_44571_STD_F313,E2_44571_STD_F311,E2_44571_STD_F311,E2_44571_STD_F311,E2_44256_STD_F315,E2_44256_STD_F315,E2_44256_STD_F315,E2_44256_STD_F313,E2_44256_STD_F313,E2_44256_STD_F313,E2_44070_STD_F314,E2_44070_STD_F314,E2_44070_STD_F314,E2_44070_STD_F313,E2_44070_STD_F313,E2_44070_STD_F313,E2_44070_STD_F311,E2_44070_STD_F311,E2_44070_STD_F311,E2_44027_STD_F315,E2_44027_STD_F315,E2_44027_STD_F315,E2_44027_STD_F313,E2_44027_STD_F313,E2_44027_STD_F313,E2_44027_STD_F311,E2_44027_STD_F311,E2_44027_STD_F311,E2_43755_STD_F315,E2_43755_STD_F315,E2_43755_STD_F315,E2_43755_STD_F313,E2_43755_STD_F313,E2_43755_STD_F313,E2_39289_STD_F311,E2_39289_STD_F311,E2_39289_STD_F311,E2_39246_STD_F315,E2_39246_STD_F315,E2_39246_STD_F313,E2_39246_STD_F313,E2_39060_STD_F315,E2_39060_STD_F315,E2_39060_STD_F315,E2_39060_STD_F313,E2_39060_STD_F313,E2_39060_STD_F313,E2_39060_STD_F311,E2_39060_STD_F311,E2_39060_STD_F311,E2_38831_STD_F312,E2_38831_STD_F312,E2_38831_STD_F312,E2_38831_STD_F311,E2_38831_STD_F311,E2_38831_STD_F311,E2_27286_STD_F137,E2_27286_STD_F137,E2_27286_STD_F137,E2_27100_STD_F139,E2_27100_STD_F139,E2_27100_STD_F139,E2_27100_STD_F137,E2_27100_STD_F137,E2_27100_STD_F137,E2_27100_STD_F135,E2_27100_STD_F135,E2_27100_STD_F135,E2_26556_STD_F139,E2_26556_STD_F139,E2_26556_STD_F139,E2_26556_STD_F137,E2_26556_STD_F137,E2_26556_STD_F137,E2_26556_STD_F135,E2_26556_STD_F135,E2_26556_STD_F135,E2_26098_STD_F139,E2_26098_STD_F139,E2_26098_STD_F139,E2_26098_STD_F137,E2_26098_STD_F137,E2_26098_STD_F137,E2_26098_STD_F135,E2_26098_STD_F135,E2_26098_STD_F135,E2_24803_STD_F312,E2_24803_STD_F312,E2_24803_STD_F312,E2_24803_STD_F311,E2_24803_STD_F311,E2_24803_STD_F311,E2_23801_STD_F315,E2_23801_STD_F315,E2_23801_STD_F315,E2_23801_STD_F313,E2_23801_STD_F313,E2_23801_STD_F313,E2_23801_STD_F311,E2_23801_STD_F311,E2_23801_STD_F311,E2_23486_STD_F312,E2_23486_STD_F312,E2_23486_STD_F312,E2_23486_STD_F311,E2_23486_STD_F311,E2_23486_STD_F311,E2_22985_STD_F315,E2_22985_STD_F315,E2_22985_STD_F315,E2_22985_STD_F313,E2_22985_STD_F313,E2_22985_STD_F313,E2_22985_STD_F311,E2_22985_STD_F311,E2_22985_STD_F311,E2_22942_STD_F313,E2_22942_STD_F313,E2_22942_STD_F313,E2_22799_STD_F312,E2_22799_STD_F312,E2_22799_STD_F312,E2_22799_STD_F311,E2_22799_STD_F311,E2_22799_STD_F311,E2_22548_STD_F139,E2_22548_STD_F139,E2_22548_STD_F139,E2_22548_STD_F137,E2_22548_STD_F137,E2_22548_STD_F137,E2_22548_STD_F135,E2_22548_STD_F135,E2_22548_STD_F135,E2_22484_STD_F315,E2_22484_STD_F315,E2_22484_STD_F315,E2_22484_STD_F313,E2_22484_STD_F313,E2_22484_STD_F313,E2_22484_STD_F311,E2_22484_STD_F311,E2_22484_STD_F311,E2_22441_STD_F315,E2_22441_STD_F315,E2_22441_STD_F315,E2_22441_STD_F313,E2_22441_STD_F313,E2_22441_STD_F313,E2_22298_STD_F314,E2_22298_STD_F314,E2_22298_STD_F314,E2_22298_STD_F313,E2_22298_STD_F313,E2_22298_STD_F313,E2_22298_STD_F311,E2_22298_STD_F311,E2_22298_STD_F311,E2_21546_STD_F139,E2_21546_STD_F139,E2_21546_STD_F139,E2_21546_STD_F137,E2_21546_STD_F137,E2_21546_STD_F137,E2_21546_STD_F135,E2_21546_STD_F135,E2_21546_STD_F135,E2_21439_STD_F315,E2_21439_STD_F315,E2_21439_STD_F315,E2_21439_STD_F313,E2_21439_STD_F313,E2_21439_STD_F313,E2_21296_STD_F315,E2_21296_STD_F315,E2_21296_STD_F315,E2_21296_STD_F313,E2_21296_STD_F313,E2_21296_STD_F313,E2_21296_STD_F311,E2_21296_STD_F311,E2_21296_STD_F311,E2_20938_STD_F315,E2_20938_STD_F315,E2_20938_STD_F315,E2_20938_STD_F313,E2_20938_STD_F313,E2_20938_STD_F313,E2_20480_STD_F315,E2_20480_STD_F315,E2_20480_STD_F315,E2_20480_STD_F314,E2_20480_STD_F314,E2_20480_STD_F313,E2_20480_STD_F313,E2_20480_STD_F313,E2_20480_STD_F312,E2_20480_STD_F312,E2_20480_STD_F311,E2_20480_STD_F311,E2_20480_STD_F311,E2_20437_STD_F315,E2_20437_STD_F315,E2_20437_STD_F315,E2_20437_STD_F313,E2_20437_STD_F313,E2_20437_STD_F313,E2_20294_STD_F315,E2_20294_STD_F315,E2_20294_STD_F315,E2_20294_STD_F314,E2_20294_STD_F314,E2_20294_STD_F313,E2_20294_STD_F313,E2_20294_STD_F313,E2_20294_STD_F312,E2_20294_STD_F312,E2_20294_STD_F311,E2_20294_STD_F311,E2_20294_STD_F311,E2_18791_STD_F315,E2_18791_STD_F315,E2_18791_STD_F315,E2_18791_STD_F313,E2_18791_STD_F313,E2_18791_STD_F313,E2_18791_STD_F311,E2_18791_STD_F311,E2_18791_STD_F311,E2_18562_STD_F313,E2_18562_STD_F313,E2_18562_STD_F313,E2_18268_STD_F137,E2_18268_STD_F137,E2_18268_STD_F137,J1_36376_STD_F315,J1_36376_STD_F315,J1_36376_STD_F315,J1_36376_STD_F313,J1_36376_STD_F313,J1_36376_STD_F313,J1_36361_STD_F315,J1_36361_STD_F315,J1_36361_STD_F315,J1_36361_STD_F313,J1_36361_STD_F313,J1_36361_STD_F313,E2_18061_STD_F313,E2_18061_STD_F313,E2_18061_STD_F313,E2_17789_STD_F315,E2_17789_STD_F315,E2_17789_STD_F314,E2_17789_STD_F314,E2_17789_STD_F312,E2_17789_STD_F312,J1_35702_STD_F315,J1_35702_STD_F315,J1_35702_STD_F315,J1_35702_STD_F313,J1_35702_STD_F313,J1_35702_STD_F313,J1_35687_STD_F315,J1_35687_STD_F315,J1_35687_STD_F315,J1_35687_STD_F314,J1_35687_STD_F314,J1_35687_STD_F313,J1_35687_STD_F313,J1_35687_STD_F313,E2_17288_STD_F315,E2_17288_STD_F315,E2_17288_STD_F315,E2_17288_STD_F313,E2_17288_STD_F313,E2_17288_STD_F313,E2_17288_STD_F311,E2_17288_STD_F311,E2_17288_STD_F311,E2_17059_STD_F313,E2_17059_STD_F313,E2_17059_STD_F313,E2_16558_STD_F313,E2_16558_STD_F313,E2_16558_STD_F313,J1_34384_STD_F315,J1_34384_STD_F315,J1_34384_STD_F315,J1_34384_STD_F313,J1_34384_STD_F313,J1_34384_STD_F313,J1_34369_STD_F315,J1_34369_STD_F315,J1_34369_STD_F315,J1_34369_STD_F313,J1_34369_STD_F313,J1_34369_STD_F313,J1_33755_STD_F315,J1_33755_STD_F315,J1_33755_STD_F315,J1_33755_STD_F313,J1_33755_STD_F313,J1_33755_STD_F313,J1_33740_STD_F315,J1_33740_STD_F315,J1_33740_STD_F315,J1_33740_STD_F313,J1_33740_STD_F313,J1_33740_STD_F313,J1_33141_STD_F315,J1_33141_STD_F315,J1_33141_STD_F315,J1_33141_STD_F313,J1_33141_STD_F313,J1_33141_STD_F313,J1_33111_STD_F315,J1_33111_STD_F315,J1_33111_STD_F315,J1_33111_STD_F313,J1_33111_STD_F313,J1_33111_STD_F313,J1_33081_STD_F315,J1_33081_STD_F315,J1_33081_STD_F315,J1_33081_STD_F313,J1_33081_STD_F313,J1_33081_STD_F313,J1_33051_STD_F315,J1_33051_STD_F315,J1_33051_STD_F315,J1_33051_STD_F314,J1_33051_STD_F314,J1_33051_STD_F313,J1_33051_STD_F313,J1_33051_STD_F313,J1_32482_STD_F315,J1_32482_STD_F315,J1_32482_STD_F315,J1_32482_STD_F313,J1_32482_STD_F313,J1_32482_STD_F313,J1_31134_STD_F315,J1_31134_STD_F315,J1_31134_STD_F315,J1_31134_STD_F313,J1_31134_STD_F313,J1_31134_STD_F313,J1_30520_STD_F314,J1_30520_STD_F314,J1_30505_STD_F315,J1_30505_STD_F315,J1_30505_STD_F315,J1_30505_STD_F313,J1_30505_STD_F313,J1_30505_STD_F313,J1_30490_STD_F315,J1_30490_STD_F315,J1_30490_STD_F315,J1_30490_STD_F313,J1_30490_STD_F313,J1_30490_STD_F313,J1_30460_STD_F316,J1_30460_STD_F316,J1_30460_STD_F315,J1_30460_STD_F315,J1_30460_STD_F315,J1_30460_STD_F314,J1_30460_STD_F314,J1_30460_STD_F313,J1_30460_STD_F313,J1_30460_STD_F313,J1_30460_STD_F312,J1_30460_STD_F312,J1_30445_STD_F315,J1_30445_STD_F315,J1_30445_STD_F315,J1_30445_STD_F313,J1_30445_STD_F313,J1_30445_STD_F313,E2_11505_STD_F316,E2_11505_STD_F316,E2_11505_STD_F314,E2_11505_STD_F314,E2_11505_STD_F312,E2_11505_STD_F312,E2_09773_STD_F315,E2_09773_STD_F315,E2_09773_STD_F315,E2_09773_STD_F313,E2_09773_STD_F313,E2_09773_STD_F313,E2_09773_STD_F311,E2_09773_STD_F311,E2_09773_STD_F311,E2_09751_STD_F137,E2_09751_STD_F137,E2_09751_STD_F137,E2_09501_STD_F313,E2_09501_STD_F313,E2_09501_STD_F313,E2_09501_STD_F311,E2_09501_STD_F311,E2_09501_STD_F311,E2_09250_STD_F137,E2_09250_STD_F137,E2_09250_STD_F137,E2_09000_STD_F315,E2_09000_STD_F315,E2_09000_STD_F315,E2_09000_STD_F313,E2_09000_STD_F313,E2_09000_STD_F313,E2_09000_STD_F311,E2_09000_STD_F311,E2_08771_STD_F315,E2_08771_STD_F315,E2_08771_STD_F315,E2_08771_STD_F313,E2_08771_STD_F313,E2_08771_STD_F313,E2_08771_STD_F311,E2_08771_STD_F311,E2_08771_STD_F311,E2_08685_STD_F315,E2_08685_STD_F315,E2_08685_STD_F315,E2_08685_STD_F313,E2_08685_STD_F313,E2_08685_STD_F313,E2_08270_STD_F315,E2_08270_STD_F315,E2_08270_STD_F315,E2_08270_STD_F313,E2_08270_STD_F313,E2_08270_STD_F313,E2_08270_STD_F311,E2_08270_STD_F311,E2_08270_STD_F311,E2_08184_STD_F315,E2_08184_STD_F315,E2_08184_STD_F315,E2_08184_STD_F313,E2_08184_STD_F313,E2_08184_STD_F313,E2_07998_STD_F315,E2_07998_STD_F315,E2_07998_STD_F315,E2_07998_STD_F313,E2_07998_STD_F313,E2_07998_STD_F313,E2_07998_STD_F311,E2_07998_STD_F311,E2_07998_STD_F311,E2_07912_STD_F315,E2_07912_STD_F315,E2_07912_STD_F315,E2_07912_STD_F313,E2_07912_STD_F313,E2_07912_STD_F313,E2_07769_STD_F313,E2_07769_STD_F313,E2_07769_STD_F313,E2_07769_STD_F311,E2_07769_STD_F311,E2_07769_STD_F311,E2_07683_STD_F315,E2_07683_STD_F315,E2_07683_STD_F315,E2_07683_STD_F313,E2_07683_STD_F313,E2_07683_STD_F313,E2_07454_STD_F315,E2_07454_STD_F315,E2_07454_STD_F315,E2_07454_STD_F313,E2_07454_STD_F313,E2_07454_STD_F313,E2_07454_STD_F311,E2_07454_STD_F311,E2_07411_STD_F315,E2_07411_STD_F315,E2_07411_STD_F315,E2_07411_STD_F313,E2_07411_STD_F313,E2_07411_STD_F313,E2_07268_STD_F311,E2_07268_STD_F311,E2_07268_STD_F311,E2_07182_STD_F315,E2_07182_STD_F315,E2_07182_STD_F315,E2_07182_STD_F313,E2_07182_STD_F313,E2_07182_STD_F313,E2_07039_STD_F313,E2_07039_STD_F313,E2_07039_STD_F313,J1_24514_STD_F315,J1_24514_STD_F315,J1_24514_STD_F315,J1_24514_STD_F313,J1_24514_STD_F313,J1_24514_STD_F313,E2_06266_STD_F313,E2_06266_STD_F313,E2_06266_STD_F312,E2_06266_STD_F312,E2_06266_STD_F311,E2_06266_STD_F311,E2_06180_STD_F315,E2_06180_STD_F315,E2_06180_STD_F315,E2_06180_STD_F313,E2_06180_STD_F313,E2_06180_STD_F313,J1_23855_STD_F315,J1_23855_STD_F315,J1_23855_STD_F315,J1_23855_STD_F313,J1_23855_STD_F313,J1_23855_STD_F313,E2_05994_STD_F312,E2_05994_STD_F312,E2_05994_STD_F312,E2_05994_STD_F311,E2_05994_STD_F311,E2_05994_STD_F311,E2_05908_STD_F315,E2_05908_STD_F315,E2_05908_STD_F315,E2_05908_STD_F314,E2_05908_STD_F314,E2_05908_STD_F313,E2_05908_STD_F313,E2_05908_STD_F313,E2_05765_STD_F314,E2_05765_STD_F314,E2_05765_STD_F314,E2_05765_STD_F313,E2_05765_STD_F313,E2_05765_STD_F313,E2_05765_STD_F311,E2_05765_STD_F311,E2_05765_STD_F311,E2_05722_STD_F314,E2_05722_STD_F314,E2_05722_STD_F313,E2_05722_STD_F313,E2_05722_STD_F311,E2_05722_STD_F311,E2_05679_STD_F315,E2_05679_STD_F315,E2_05679_STD_F315,E2_05679_STD_F313,E2_05679_STD_F313,E2_05679_STD_F313,E2_05493_STD_F311,E2_05493_STD_F311,E2_05493_STD_F311,E2_05450_STD_F315,E2_05450_STD_F315,E2_05450_STD_F315,E2_05450_STD_F314,E2_05450_STD_F314,E2_05450_STD_F313,E2_05450_STD_F313,E2_05450_STD_F313,E2_05450_STD_F312,E2_05450_STD_F312,E2_05450_STD_F311,E2_05450_STD_F311,E2_05450_STD_F311,E2_05035_STD_F314,E2_05035_STD_F314,E2_05035_STD_F314,E2_05035_STD_F313,E2_05035_STD_F313,E2_05035_STD_F313,E2_04906_STD_F313,E2_04906_STD_F313,E2_04906_STD_F313,E2_04491_STD_F314,E2_04491_STD_F314,E2_04491_STD_F314,E2_04491_STD_F313,E2_04491_STD_F313,E2_04491_STD_F313,E2_04491_STD_F311,E2_04491_STD_F311,E2_04491_STD_F311,E2_04054_STD_F139,E2_04054_STD_F139,E2_04054_STD_F139,E2_04054_STD_F137,E2_04054_STD_F137,E2_04054_STD_F137,E2_03489_STD_F314,E2_03489_STD_F314,E2_03489_STD_F314,E2_03489_STD_F313,E2_03489_STD_F313,E2_03489_STD_F313,E2_03489_STD_F311,E2_03489_STD_F311,E2_03489_STD_F311,E2_03446_STD_F316,E2_03446_STD_F316,E2_03446_STD_F316,E2_03446_STD_F315,E2_03446_STD_F315,E2_03446_STD_F315,E2_03446_STD_F313,E2_03446_STD_F313,E2_03446_STD_F313,E2_03446_STD_F311,E2_03446_STD_F311,E2_03446_STD_F311,E2_03174_STD_F315,E2_03174_STD_F315,E2_03174_STD_F315,E2_03174_STD_F313,E2_03174_STD_F313,E2_03174_STD_F313,E2_02716_STD_F312,E2_02716_STD_F312,E2_02716_STD_F312,E2_02716_STD_F311,E2_02716_STD_F311,E2_02716_STD_F311,E2_02487_STD_F316,E2_02487_STD_F316,E2_02487_STD_F316,E2_02487_STD_F315,E2_02487_STD_F315,E2_02487_STD_F315,E2_02487_STD_F313,E2_02487_STD_F313,E2_02487_STD_F313,E2_02487_STD_F311,E2_02487_STD_F311,E2_02487_STD_F311,),
    '2.2, 3.7: check for filtering search results by multiple platforms' );

  $mech->post($surn, { granule_list => 'E2_81230_STD_F289', format => 'metalink' } );
  is($mech->content_type(),'application/metalink+xml', '3.9.2: metalink returns application/metalink+xml content type');

  # testing search restriction by date range: start
  $mech->post_ok($surn, { 'bbox' => '-135,63,-130,67', start => '2010-10-30T11:59:59UTC', format => 'list' } );
  is($mech->content(), qq(E2_81373_STD_F293,E2_81373_STD_F293,E2_81373_STD_F291,E2_81373_STD_F291,E2_81373_STD_F289,E2_81373_STD_F289,E2_81373_STD_F289,E2_81373_STD_F287,E2_81373_STD_F287,E2_81373_STD_F287,E2_81373_STD_F285,E2_81373_STD_F285,E2_81373_STD_F285,E2_81373_STD_F283,E2_81373_STD_F283,E2_81373_STD_F283,E2_81316_STD_F291,E2_81316_STD_F291,E2_81316_STD_F291,E2_81316_STD_F289,E2_81316_STD_F289,E2_81316_STD_F289,E2_81316_STD_F287,E2_81316_STD_F287,E2_81316_STD_F287,E2_81316_STD_F285,E2_81316_STD_F285,E2_81316_STD_F285,E2_81316_STD_F283,E2_81316_STD_F283,E2_81316_STD_F283,E2_81316_STD_F281,E2_81316_STD_F281,E2_81316_STD_F281,E2_81287_STD_F291,E2_81287_STD_F291,E2_81287_STD_F291,E2_81287_STD_F289,E2_81287_STD_F289,E2_81287_STD_F289,E2_81287_STD_F287,E2_81287_STD_F287,E2_81287_STD_F287,E2_81230_STD_F293,E2_81230_STD_F293,E2_81230_STD_F293,E2_81230_STD_F291,E2_81230_STD_F291,E2_81230_STD_F291,E2_81230_STD_F289,E2_81230_STD_F289,E2_81230_STD_F289,E2_81230_STD_F287,E2_81230_STD_F287,E2_81230_STD_F287,E2_81230_STD_F285,E2_81230_STD_F285,E2_81230_STD_F285,E2_81230_STD_F283,E2_81230_STD_F283,E2_81230_STD_F283,E2_81230_STD_F281,E2_81230_STD_F281,E2_81230_STD_F281,E2_81187_STD_F293,E2_81187_STD_F293,E2_81187_STD_F293,E2_81187_STD_F291,E2_81187_STD_F291,E2_81187_STD_F291,E2_81187_STD_F289,E2_81187_STD_F289,E2_81187_STD_F289,E2_81187_STD_F287,E2_81187_STD_F287,E2_81187_STD_F287,E2_81187_STD_F285,E2_81187_STD_F285,E2_81187_STD_F285,E2_81187_STD_F283,E2_81187_STD_F283,E2_81187_STD_F283,E2_81187_STD_F281,E2_81187_STD_F281,E2_81187_STD_F281,),
    '2.3, 3.4: check for search results bounded by start date' );

  $mech->post_ok($surn, { 'bbox' => '-135,63,-130,67', end => '1991-10-01T00:00:00UTC', format => 'list' } );
  is($mech->content(), q(E1_01071_STD_F291,E1_01071_STD_F291,E1_01071_STD_F291,E1_01071_STD_F289,E1_01071_STD_F289,E1_01071_STD_F289,E1_01071_STD_F287,E1_01071_STD_F287,E1_01071_STD_F287,E1_01071_STD_F285,E1_01071_STD_F285,E1_01071_STD_F285,E1_01063_STD_F167,E1_01063_STD_F167,E1_01063_STD_F165,E1_01063_STD_F165,E1_01063_STD_F163,E1_01063_STD_F163,E1_01063_STD_F161,E1_01063_STD_F161,E1_00891_STD_F167,E1_00891_STD_F167,E1_00891_STD_F167,E1_00891_STD_F165,E1_00891_STD_F165,E1_00891_STD_F165,E1_00891_STD_F163,E1_00891_STD_F163,E1_00891_STD_F163,E1_00891_STD_F161,E1_00891_STD_F161,E1_00891_STD_F161,E1_00885_STD_F293,E1_00885_STD_F293,E1_00885_STD_F293,E1_00885_STD_F291,E1_00885_STD_F291,E1_00885_STD_F291,E1_00885_STD_F289,E1_00885_STD_F289,E1_00885_STD_F289,E1_00885_STD_F287,E1_00885_STD_F287,E1_00885_STD_F287,E1_00885_STD_F285,E1_00885_STD_F285,E1_00885_STD_F285,E1_00885_STD_F283,E1_00885_STD_F283,E1_00885_STD_F283,E1_00885_STD_F281,E1_00885_STD_F281,E1_00885_STD_F281,E1_00455_STD_F293,E1_00455_STD_F293,E1_00455_STD_F293,E1_00455_STD_F291,E1_00455_STD_F291,E1_00455_STD_F291,E1_00455_STD_F289,E1_00455_STD_F289,E1_00455_STD_F289,E1_00455_STD_F287,E1_00455_STD_F287,E1_00455_STD_F287,E1_00455_STD_F285,E1_00455_STD_F285,E1_00455_STD_F285,E1_00455_STD_F283,E1_00455_STD_F283,E1_00455_STD_F283,E1_00455_STD_F281,E1_00455_STD_F281,E1_00455_STD_F281,E1_00404_STD_F169,E1_00404_STD_F169,E1_00404_STD_F169,E1_00404_STD_F167,E1_00404_STD_F167,E1_00404_STD_F167,E1_00404_STD_F165,E1_00404_STD_F165,E1_00404_STD_F165,E1_00404_STD_F163,E1_00404_STD_F163,E1_00404_STD_F163,E1_00404_STD_F161,E1_00404_STD_F161,E1_00404_STD_F161,E1_00404_STD_F159,E1_00404_STD_F159,E1_00404_STD_F159,E1_00404_STD_F157,E1_00404_STD_F157,E1_00404_STD_F157,),
    '2.4, 3.5: check for search results bounded by end date' );

  $mech->post_ok($surn, { 'bbox' => '-135,60,-130,70', start => '1998-06-01T00:00:00Z', end => '1998-06-30T11:59:59Z', format=>'list' } );
  is($mech->content(), q(E2_16687_STD_F297,E2_16687_STD_F297,E2_16687_STD_F297,E2_16687_STD_F295,E2_16687_STD_F295,E2_16687_STD_F295,E2_16687_STD_F293,E2_16687_STD_F293,E2_16687_STD_F293,E2_16687_STD_F291,E2_16687_STD_F291,E2_16687_STD_F291,E2_16687_STD_F289,E2_16687_STD_F289,E2_16687_STD_F289,E2_16687_STD_F287,E2_16687_STD_F287,E2_16687_STD_F287,E2_16687_STD_F285,E2_16687_STD_F285,E2_16687_STD_F285,E2_16687_STD_F283,E2_16687_STD_F283,E2_16687_STD_F283,E2_16687_STD_F281,E2_16687_STD_F281,E2_16687_STD_F281,E2_16687_STD_F279,E2_16687_STD_F279,E2_16687_STD_F279,E2_16687_STD_F277,E2_16687_STD_F277,E2_16687_STD_F277,E2_16687_STD_F275,E2_16687_STD_F275,E2_16687_STD_F275,E2_16687_STD_F273,E2_16687_STD_F273,E2_16687_STD_F273,E2_16687_STD_F272,E2_16687_STD_F272,E2_16687_STD_F272,J1_34908_STD_F297,J1_34908_STD_F297,J1_34908_STD_F297,J1_34908_STD_F295,J1_34908_STD_F295,J1_34908_STD_F293,J1_34908_STD_F293,J1_34908_STD_F291,J1_34908_STD_F291,J1_34908_STD_F289,J1_34908_STD_F289,J1_34908_STD_F289,J1_34908_STD_F287,J1_34908_STD_F287,J1_34908_STD_F285,J1_34908_STD_F285,J1_34908_STD_F283,J1_34908_STD_F283,J1_34908_STD_F283,R1_13836_ST2_F289,R1_13836_ST2_F289,R1_13836_ST2_F289,R1_13836_ST2_F287,R1_13836_ST2_F287,R1_13836_ST2_F287,R1_13836_ST2_F286,R1_13836_ST2_F286,R1_13836_ST2_F286,R1_13836_SWB_F277,R1_13836_SWB_F277,R1_13836_SWB_F276,R1_13836_SWB_F276,R1_13835_ST2_F293,R1_13835_ST2_F293,R1_13835_ST2_F293,R1_13835_ST2_F291,R1_13835_ST2_F291,R1_13835_ST2_F291,R1_13835_ST2_F289,R1_13835_ST2_F289,R1_13835_ST2_F289,R1_13835_ST2_F287,R1_13835_ST2_F287,R1_13835_ST2_F287,E2_16673_STD_F291,E2_16673_STD_F291,E2_16673_STD_F291,E2_16673_STD_F290,E2_16673_STD_F290,E2_16673_STD_F289,E2_16673_STD_F289,E2_16673_STD_F289,E2_16673_STD_F288,E2_16673_STD_F288,E2_16673_STD_F287,E2_16673_STD_F287,E2_16673_STD_F287,E2_16673_STD_F286,E2_16673_STD_F286,E2_16673_STD_F285,E2_16673_STD_F285,E2_16673_STD_F285,E2_16673_STD_F284,E2_16673_STD_F284,E2_16673_STD_F283,E2_16673_STD_F283,E2_16673_STD_F283,E2_16673_STD_F282,E2_16673_STD_F282,E2_16673_STD_F281,E2_16673_STD_F281,E2_16673_STD_F281,E2_16673_STD_F280,E2_16673_STD_F280,E2_16673_STD_F279,E2_16673_STD_F279,E2_16673_STD_F279,E2_16673_STD_F278,E2_16673_STD_F278,J1_34893_STD_F295,J1_34893_STD_F295,J1_34893_STD_F295,J1_34893_STD_F293,J1_34893_STD_F293,J1_34893_STD_F291,J1_34893_STD_F291,J1_34893_STD_F291,J1_34893_STD_F289,J1_34893_STD_F289,J1_34893_STD_F289,J1_34893_STD_F287,J1_34893_STD_F287,J1_34893_STD_F287,J1_34893_STD_F285,J1_34893_STD_F285,J1_34893_STD_F285,J1_34893_STD_F283,J1_34893_STD_F283,J1_34893_STD_F283,R1_13821_SWB_F273,R1_13821_SWB_F273,R1_13821_SWB_F268,R1_13821_SWB_F268,J1_34863_STD_F295,J1_34863_STD_F295,J1_34863_STD_F295,J1_34863_STD_F293,J1_34863_STD_F293,J1_34863_STD_F293,J1_34863_STD_F291,J1_34863_STD_F291,J1_34863_STD_F291,J1_34863_STD_F289,J1_34863_STD_F289,J1_34863_STD_F289,J1_34863_STD_F287,J1_34863_STD_F287,J1_34863_STD_F287,J1_34863_STD_F285,J1_34863_STD_F285,J1_34863_STD_F285,R1_13793_ST1_F293,R1_13793_ST1_F293,R1_13793_ST1_F293,R1_13793_ST1_F291,R1_13793_ST1_F291,R1_13793_ST1_F291,R1_13793_ST1_F289,R1_13793_ST1_F289,R1_13793_ST1_F289,R1_13793_SWB_F279,R1_13793_SWB_F279,R1_13793_SWB_F276,R1_13793_SWB_F276,R1_13793_SWB_F268,R1_13793_SWB_F268,J1_34848_STD_F295,J1_34848_STD_F295,J1_34848_STD_F295,J1_34848_STD_F293,J1_34848_STD_F293,J1_34848_STD_F291,J1_34848_STD_F291,J1_34848_STD_F291,J1_34848_STD_F289,J1_34848_STD_F289,J1_34848_STD_F289,J1_34848_STD_F287,J1_34848_STD_F287,J1_34848_STD_F287,J1_34848_STD_F285,J1_34848_STD_F285,J1_34848_STD_F285,R1_13778_SNB_F300,R1_13778_SNB_F300,R1_13778_SNB_F292,R1_13778_SNB_F292,R1_13778_SNB_F284,R1_13778_SNB_F284,R1_13778_SNB_F276,R1_13778_SNB_F276,R1_13771_ST1_F163,R1_13771_ST1_F163,R1_13771_ST1_F163,R1_13771_ST1_F161,R1_13771_ST1_F161,R1_13771_ST1_F161,R1_13770_ST1_F162,R1_13770_ST1_F162,R1_13770_ST1_F162,R1_13770_ST1_F161,R1_13770_ST1_F161,R1_13770_ST1_F161,R1_13770_ST1_F159,R1_13770_ST1_F159,R1_13770_ST1_F159,R1_13736_SWB_F287,R1_13736_SWB_F287,R1_13736_SWB_F284,R1_13736_SWB_F284,R1_13736_SWB_F283,R1_13736_SWB_F283,R1_13735_SNB_F300,R1_13735_SNB_F300,R1_13735_SNB_F295,R1_13735_SNB_F295,R1_13735_SNB_F292,R1_13735_SNB_F292,R1_13735_SNB_F285,R1_13735_SNB_F285,R1_13735_SWB_F274,R1_13735_SWB_F274,R1_13728_ST2_F162,R1_13728_ST2_F162,R1_13728_ST2_F162,R1_13728_ST2_F161,R1_13728_ST2_F161,R1_13728_ST2_F161,R1_13728_ST2_F159,R1_13728_ST2_F159,R1_13728_ST2_F159,R1_13728_ST2_F157,R1_13728_ST2_F157,R1_13728_ST2_F157,R1_13728_ST2_F155,R1_13728_ST2_F155,R1_13728_ST2_F155,E2_16564_STD_F160,E2_16564_STD_F160,E2_16564_STD_F160,E2_16564_STD_F159,E2_16564_STD_F159,E2_16564_STD_F159,E2_16564_STD_F157,E2_16564_STD_F157,E2_16564_STD_F157,R1_13714_SWB_F166,R1_13714_SWB_F166,R1_13714_SWB_F158,R1_13714_SWB_F158,E2_16558_STD_F301,E2_16558_STD_F301,E2_16558_STD_F301,E2_16558_STD_F299,E2_16558_STD_F299,E2_16558_STD_F299,E2_16558_STD_F297,E2_16558_STD_F297,E2_16558_STD_F297,E2_16558_STD_F295,E2_16558_STD_F295,E2_16558_STD_F295,E2_16558_STD_F293,E2_16558_STD_F293,E2_16558_STD_F293,E2_16558_STD_F291,E2_16558_STD_F291,E2_16558_STD_F291,E2_16558_STD_F289,E2_16558_STD_F289,E2_16558_STD_F289,E2_16558_STD_F287,E2_16558_STD_F287,E2_16558_STD_F287,E2_16558_STD_F285,E2_16558_STD_F285,E2_16558_STD_F285,E2_16558_STD_F283,E2_16558_STD_F283,E2_16558_STD_F283,E2_16558_STD_F281,E2_16558_STD_F281,E2_16558_STD_F281,E2_16558_STD_F279,E2_16558_STD_F279,E2_16558_STD_F279,E2_16558_STD_F277,E2_16558_STD_F277,E2_16558_STD_F277,E2_16558_STD_F275,E2_16558_STD_F275,E2_16558_STD_F275,R1_13707_SWB_F272,R1_13707_SWB_F272,R1_13707_SWB_F271,R1_13707_SWB_F271,R1_13707_SWB_F268,R1_13707_SWB_F268,R1_13699_SWB_F174,R1_13699_SWB_F174,R1_13699_SWB_F171,R1_13699_SWB_F171,J1_34744_STD_F291,J1_34744_STD_F291,J1_34744_STD_F289,J1_34744_STD_F289,J1_34744_STD_F289,J1_34744_STD_F287,J1_34744_STD_F287,J1_34744_STD_F287,J1_34744_STD_F285,J1_34744_STD_F285,J1_34744_STD_F285,J1_34744_STD_F283,J1_34744_STD_F283,J1_34744_STD_F283,J1_34744_STD_F281,J1_34744_STD_F281,J1_34744_STD_F279,J1_34744_STD_F279,R1_13678_SWB_F306,R1_13678_SWB_F306,R1_13678_SWB_F302,R1_13678_SWB_F302,R1_13678_ST4_F294,R1_13678_ST4_F294,R1_13678_ST4_F293,R1_13678_ST4_F293,R1_13678_ST4_F293,R1_13678_ST4_F291,R1_13678_ST4_F291,R1_13678_ST4_F291,R1_13678_ST4_F289,R1_13678_ST4_F289,R1_13678_ST4_F289,R1_13678_ST4_F287,R1_13678_ST4_F287,R1_13678_ST4_F287,R1_13678_ST4_F285,R1_13678_ST4_F285,R1_13678_ST4_F285,R1_13678_ST4_F283,R1_13678_ST4_F283,R1_13678_ST4_F283,R1_13678_ST4_F281,R1_13678_ST4_F281,R1_13678_ST4_F281,R1_13678_ST4_F280,R1_13678_ST4_F280,R1_13678_ST4_F280,R1_13678_SWB_F271,R1_13678_SWB_F271,E2_16522_STD_F163,E2_16522_STD_F163,E2_16522_STD_F163,E2_16522_STD_F161,E2_16522_STD_F161,E2_16522_STD_F161,R1_13671_ST2_F163,R1_13671_ST2_F163,R1_13671_ST2_F163,R1_13671_ST2_F161,R1_13671_ST2_F161,R1_13671_ST2_F161,R1_13670_ST1_F162,R1_13670_ST1_F162,R1_13670_ST1_F162,R1_13670_ST1_F161,R1_13670_ST1_F161,R1_13670_ST1_F161,R1_13670_ST1_F159,R1_13670_ST1_F159,R1_13670_ST1_F159,R1_13670_ST1_F157,R1_13670_ST1_F157,R1_13670_ST1_F157,J1_34729_STD_F291,J1_34729_STD_F291,J1_34729_STD_F289,J1_34729_STD_F289,J1_34729_STD_F289,J1_34729_STD_F287,J1_34729_STD_F287,J1_34729_STD_F287,J1_34729_STD_F285,J1_34729_STD_F285,J1_34729_STD_F285,J1_34729_STD_F283,J1_34729_STD_F283,J1_34729_STD_F283,J1_34729_STD_F281,J1_34729_STD_F281,J1_34729_STD_F279,J1_34729_STD_F279,R1_13664_SWB_F302,R1_13664_SWB_F302,R1_13664_SWB_F300,R1_13664_SWB_F300,R1_13664_SWB_F299,R1_13664_SWB_F299,R1_13664_ST6_F290,R1_13664_ST6_F290,R1_13664_ST6_F290,R1_13664_ST6_F289,R1_13664_ST6_F289,R1_13664_ST6_F289,R1_13664_ST6_F287,R1_13664_ST6_F287,R1_13664_ST6_F287,R1_13664_ST6_F285,R1_13664_ST6_F285,R1_13664_ST6_F285,R1_13664_ST6_F283,R1_13664_ST6_F283,R1_13664_ST6_F283,R1_13664_ST6_F281,R1_13664_ST6_F281,R1_13664_ST6_F281,R1_13664_SWB_F272,R1_13664_SWB_F272,R1_13664_SWB_F268,R1_13664_SWB_F268,J1_34714_STD_F293,J1_34714_STD_F293,J1_34714_STD_F291,J1_34714_STD_F291,J1_34714_STD_F289,J1_34714_STD_F289,J1_34714_STD_F289,J1_34714_STD_F287,J1_34714_STD_F287,J1_34714_STD_F285,J1_34714_STD_F285,J1_34714_STD_F285,J1_34714_STD_F283,J1_34714_STD_F283,J1_34714_STD_F283,J1_34714_STD_F281,J1_34714_STD_F281,J1_34714_STD_F279,J1_34714_STD_F279,J1_34714_STD_F277,J1_34714_STD_F277,J1_34714_STD_F277,J1_34699_STD_F293,J1_34699_STD_F293,J1_34699_STD_F291,J1_34699_STD_F291,J1_34699_STD_F289,J1_34699_STD_F289,J1_34699_STD_F289,J1_34699_STD_F287,J1_34699_STD_F287,J1_34699_STD_F285,J1_34699_STD_F285,J1_34699_STD_F285,J1_34699_STD_F283,J1_34699_STD_F283,J1_34699_STD_F283,J1_34699_STD_F281,J1_34699_STD_F281,J1_34699_STD_F279,J1_34699_STD_F279,J1_34699_STD_F277,J1_34699_STD_F277,J1_34699_STD_F277,R1_13635_SWB_F272,R1_13635_SWB_F272,R1_13627_ST1_F161,R1_13627_ST1_F161,R1_13627_ST1_F161,R1_13627_ST1_F159,R1_13627_ST1_F159,R1_13627_ST1_F159,E2_16444_STD_F289,E2_16444_STD_F289,E2_16444_STD_F289,E2_16444_STD_F287,E2_16444_STD_F287,E2_16444_STD_F287,E2_16444_STD_F285,E2_16444_STD_F285,E2_16444_STD_F285,E2_16444_STD_F284,E2_16444_STD_F284,E2_16444_STD_F284,R1_13593_SWB_F276,R1_13593_SWB_F276,R1_13578_SWB_F269,R1_13578_SWB_F269,R1_13578_SWB_F268,R1_13578_SWB_F268,R1_13570_ST2_F161,R1_13570_ST2_F161,R1_13570_ST2_F161,R1_13570_ST2_F159,R1_13570_ST2_F159,R1_13570_ST2_F159,R1_13570_ST2_F157,R1_13570_ST2_F157,R1_13570_ST2_F157,R1_13564_SNB_F300,R1_13564_SNB_F300,R1_13564_SNB_F292,R1_13564_SNB_F292,R1_13564_SNB_F284,R1_13564_SNB_F284,R1_13564_SWB_F273,R1_13564_SWB_F273,R1_13564_SWB_F268,R1_13564_SWB_F268,E2_16401_STD_F291,E2_16401_STD_F291,E2_16401_STD_F291,E2_16401_STD_F289,E2_16401_STD_F289,E2_16401_STD_F289,E2_16401_STD_F287,E2_16401_STD_F287,E2_16401_STD_F287,E2_16401_STD_F285,E2_16401_STD_F285,E2_16401_STD_F285,E2_16401_STD_F283,E2_16401_STD_F283,E2_16401_STD_F283,E2_16401_STD_F281,E2_16401_STD_F281,E2_16401_STD_F281,E2_16401_STD_F279,E2_16401_STD_F279,E2_16401_STD_F279,E2_16401_STD_F277,E2_16401_STD_F277,E2_16401_STD_F277,J1_34609_STD_F295,J1_34609_STD_F295,J1_34609_STD_F293,J1_34609_STD_F293,J1_34609_STD_F291,J1_34609_STD_F291,J1_34609_STD_F289,J1_34609_STD_F289,J1_34609_STD_F289,J1_34609_STD_F287,J1_34609_STD_F287,J1_34609_STD_F285,J1_34609_STD_F285,J1_34609_STD_F285,J1_34609_STD_F283,J1_34609_STD_F283,J1_34609_STD_F283,J1_34609_STD_F281,J1_34609_STD_F281,J1_34609_STD_F279,J1_34609_STD_F279,J1_34609_STD_F277,J1_34609_STD_F277,J1_34609_STD_F277,J1_34609_STD_F275,J1_34609_STD_F275,J1_34609_STD_F273,J1_34609_STD_F273,J1_34609_STD_F273,R1_13536_SWB_F287,R1_13536_SWB_F287,R1_13536_SWB_F284,R1_13536_SWB_F284,J1_34579_STD_F297,J1_34579_STD_F297,J1_34579_STD_F297,J1_34579_STD_F295,J1_34579_STD_F295,J1_34579_STD_F295,J1_34579_STD_F293,J1_34579_STD_F293,J1_34579_STD_F291,J1_34579_STD_F291,J1_34579_STD_F289,J1_34579_STD_F289,J1_34579_STD_F289,J1_34579_STD_F287,J1_34579_STD_F287,J1_34579_STD_F287,J1_34579_STD_F285,J1_34579_STD_F285,J1_34579_STD_F285,J1_34579_STD_F283,J1_34579_STD_F283,J1_34579_STD_F283,J1_34579_STD_F281,J1_34579_STD_F281,J1_34579_STD_F279,J1_34579_STD_F279,J1_34579_STD_F277,J1_34579_STD_F277,J1_34579_STD_F277,J1_34579_STD_F275,J1_34579_STD_F275,J1_34579_STD_F273,J1_34579_STD_F273,J1_34579_STD_F273,R1_13521_ST2_F301,R1_13521_ST2_F301,R1_13521_ST2_F301,E2_16358_STD_F291,E2_16358_STD_F291,E2_16358_STD_F291,E2_16358_STD_F289,E2_16358_STD_F289,E2_16358_STD_F289,E2_16358_STD_F287,E2_16358_STD_F287,E2_16358_STD_F287,E2_16358_STD_F285,E2_16358_STD_F285,E2_16358_STD_F285,E2_16358_STD_F283,E2_16358_STD_F283,E2_16358_STD_F283,E2_16358_STD_F281,E2_16358_STD_F281,E2_16358_STD_F281,E2_16358_STD_F279,E2_16358_STD_F279,E2_16358_STD_F279,E2_16358_STD_F277,E2_16358_STD_F277,E2_16358_STD_F277,E2_16358_STD_F275,E2_16358_STD_F275,E2_16358_STD_F275,R1_13507_SWB_F297,R1_13507_SWB_F297,R1_13507_SWB_F294,R1_13507_SWB_F294,R1_13499_WD2_F177,R1_13499_WD2_F175,R1_13499_WD2_F173,R1_13499_WD2_F172,J1_34549_STD_F298,J1_34549_STD_F298,J1_34549_STD_F297,J1_34549_STD_F297,J1_34549_STD_F297,J1_34549_STD_F296,J1_34549_STD_F296,J1_34549_STD_F295,J1_34549_STD_F295,J1_34549_STD_F295,J1_34549_STD_F294,J1_34549_STD_F294,J1_34549_STD_F293,J1_34549_STD_F293,J1_34549_STD_F292,J1_34549_STD_F292,J1_34549_STD_F291,J1_34549_STD_F291,J1_34549_STD_F290,J1_34549_STD_F290,J1_34549_STD_F289,J1_34549_STD_F289,J1_34549_STD_F289,J1_34549_STD_F288,J1_34549_STD_F288,J1_34549_STD_F287,J1_34549_STD_F287,J1_34549_STD_F287,J1_34549_STD_F286,J1_34549_STD_F286,J1_34549_STD_F285,J1_34549_STD_F285,J1_34549_STD_F285,J1_34549_STD_F284,J1_34549_STD_F284,J1_34549_STD_F283,J1_34549_STD_F283,J1_34549_STD_F283,J1_34549_STD_F282,J1_34549_STD_F282,J1_34549_STD_F281,J1_34549_STD_F281,J1_34549_STD_F281,J1_34549_STD_F280,J1_34549_STD_F280,J1_34549_STD_F279,J1_34549_STD_F279,J1_34549_STD_F278,J1_34549_STD_F278,J1_34549_STD_F277,J1_34549_STD_F277,J1_34549_STD_F277,J1_34549_STD_F276,J1_34549_STD_F276,J1_34549_STD_F275,J1_34549_STD_F275,J1_34549_STD_F275,J1_34549_STD_F274,J1_34549_STD_F274,J1_34549_STD_F273,J1_34549_STD_F273,J1_34549_STD_F273,R1_13493_ST2_F290,R1_13493_ST2_F290,R1_13493_ST2_F289,R1_13493_ST2_F289,R1_13493_ST2_F289,R1_13493_ST2_F288,R1_13493_ST2_F288,R1_13493_ST2_F287,R1_13493_ST2_F287,R1_13493_ST2_F287,R1_13493_ST2_F286,R1_13493_ST2_F286,R1_13493_ST2_F286,R1_13493_SWB_F277,R1_13493_SWB_F277,R1_13493_SWB_F276,R1_13493_SWB_F276,R1_13493_SWB_F273,R1_13493_SWB_F273,J1_34534_STD_F299,J1_34534_STD_F299,J1_34534_STD_F299,J1_34534_STD_F297,J1_34534_STD_F297,J1_34534_STD_F297,J1_34534_STD_F295,J1_34534_STD_F295,J1_34534_STD_F295,J1_34534_STD_F293,J1_34534_STD_F293,J1_34534_STD_F291,J1_34534_STD_F291,J1_34534_STD_F289,J1_34534_STD_F289,J1_34534_STD_F289,J1_34534_STD_F287,J1_34534_STD_F287,J1_34534_STD_F287,J1_34534_STD_F285,J1_34534_STD_F285,J1_34534_STD_F285,J1_34534_STD_F283,J1_34534_STD_F283,J1_34534_STD_F283,J1_34534_STD_F281,J1_34534_STD_F281,J1_34534_STD_F279,J1_34534_STD_F279,J1_34534_STD_F277,J1_34534_STD_F277,J1_34534_STD_F277,J1_34534_STD_F275,J1_34534_STD_F275,J1_34534_STD_F273,J1_34534_STD_F273,J1_34534_STD_F273,J1_34504_STD_F299,J1_34504_STD_F299,J1_34504_STD_F299,J1_34504_STD_F297,J1_34504_STD_F297,J1_34504_STD_F297,J1_34504_STD_F295,J1_34504_STD_F295,J1_34504_STD_F293,J1_34504_STD_F293,J1_34504_STD_F291,J1_34504_STD_F291,J1_34504_STD_F289,J1_34504_STD_F289,J1_34504_STD_F289,J1_34504_STD_F287,J1_34504_STD_F287,J1_34504_STD_F285,J1_34504_STD_F285,J1_34504_STD_F285,J1_34504_STD_F283,J1_34504_STD_F283,J1_34504_STD_F283,J1_34504_STD_F281,J1_34504_STD_F281,J1_34504_STD_F279,J1_34504_STD_F279,J1_34504_STD_F277,J1_34504_STD_F277,J1_34504_STD_F277,J1_34504_STD_F275,J1_34504_STD_F275,J1_34504_STD_F273,J1_34504_STD_F273,J1_34504_STD_F273,R1_13450_SWA_F292,R1_13450_SWA_F292,R1_13450_SWA_F289,R1_13450_SWA_F289,R1_13450_SWB_F275,R1_13450_SWB_F275,R1_13450_SWB_F268,R1_13450_SWB_F268,R1_13442_ST3_F166,R1_13442_ST3_F166,R1_13442_ST3_F166,R1_13442_ST3_F165,R1_13442_ST3_F165,R1_13442_ST3_F165,R1_13442_ST3_F163,R1_13442_ST3_F163,R1_13442_ST3_F163,R1_13442_ST3_F161,R1_13442_ST3_F161,R1_13442_ST3_F161,R1_13442_ST3_F159,R1_13442_ST3_F159,R1_13442_ST3_F159,R1_13442_ST3_F157,R1_13442_ST3_F157,R1_13442_ST3_F157,R1_13442_ST3_F155,R1_13442_ST3_F155,R1_13442_ST3_F155,R1_13442_ST3_F153,R1_13442_ST3_F153,R1_13442_ST3_F153,R1_13442_ST3_F151,R1_13442_ST3_F151,R1_13442_ST3_F151,J1_34489_STD_F301,J1_34489_STD_F301,J1_34489_STD_F300,J1_34489_STD_F300,J1_34489_STD_F299,J1_34489_STD_F299,J1_34489_STD_F299,J1_34489_STD_F298,J1_34489_STD_F298,J1_34489_STD_F297,J1_34489_STD_F297,J1_34489_STD_F297,J1_34489_STD_F296,J1_34489_STD_F296,J1_34489_STD_F295,J1_34489_STD_F295,J1_34489_STD_F295,J1_34489_STD_F294,J1_34489_STD_F294,J1_34489_STD_F293,J1_34489_STD_F293,J1_34489_STD_F292,J1_34489_STD_F292,J1_34489_STD_F291,J1_34489_STD_F291,J1_34489_STD_F290,J1_34489_STD_F290,J1_34489_STD_F289,J1_34489_STD_F289,J1_34489_STD_F289,J1_34489_STD_F288,J1_34489_STD_F288,J1_34489_STD_F287,J1_34489_STD_F287,J1_34489_STD_F287,J1_34489_STD_F286,J1_34489_STD_F286,J1_34489_STD_F285,J1_34489_STD_F285,J1_34489_STD_F285,J1_34489_STD_F284,J1_34489_STD_F284,J1_34489_STD_F283,J1_34489_STD_F283,J1_34489_STD_F283,J1_34489_STD_F282,J1_34489_STD_F282,J1_34489_STD_F281,J1_34489_STD_F281,J1_34489_STD_F281,J1_34489_STD_F280,J1_34489_STD_F280,J1_34489_STD_F279,J1_34489_STD_F279,J1_34489_STD_F278,J1_34489_STD_F278,J1_34489_STD_F277,J1_34489_STD_F277,J1_34489_STD_F277,J1_34489_STD_F276,J1_34489_STD_F276,J1_34489_STD_F275,J1_34489_STD_F275,J1_34489_STD_F275,J1_34489_STD_F274,J1_34489_STD_F274,J1_34489_STD_F273,J1_34489_STD_F273,J1_34489_STD_F273,R1_13435_SNB_F301,R1_13435_SNB_F300,R1_13435_SNB_F300,R1_13435_SNB_F292,R1_13435_SNB_F292,R1_13435_SNB_F291,R1_13435_SNB_F284,R1_13435_SNB_F284,R1_13435_SNB_F281,R1_13435_SNB_F276,R1_13435_SNB_F276,R1_13428_ST1_F163,R1_13428_ST1_F163,R1_13428_ST1_F163,R1_13428_ST1_F161,R1_13428_ST1_F161,R1_13428_ST1_F161,R1_13428_SWB_F149,R1_13428_SWB_F149,R1_13427_ST1_F162,R1_13427_ST1_F162,R1_13427_ST1_F162,R1_13427_ST1_F161,R1_13427_ST1_F161,R1_13427_ST1_F161,R1_13427_ST1_F159,R1_13427_ST1_F159,R1_13427_ST1_F159,),
    '2.5, 3.6: check for search results bounded by start and end date' );
  
  $mech->post_ok($surn, { limit => '5', 'bbox' => '-135,60,-130,70', start => '1998-06-01T00:00:00Z', end => '1998-06-30T11:59:59Z', format=>'list' } );
  is($mech->content(), q(J1_34549_STD_F290,J1_34549_STD_F282,J1_34549_STD_F282,J1_34549_STD_F274,J1_34549_STD_F274,),
    'TC1145: test ability to limit search results via parameter' );

  $mech->post_ok($surn, { 'bbox' => '-135,60,-130,70', start => '1998-06-01T00:00:00Z', end => '1998-06-30T11:59:59Z', format=>'count' } );
  is($mech->content(), '937', 'TC1146: test getting results as count' );

  $mech->post_ok($surn, { 'bbox' => '-135,64.5,-135.1,64.6', end => '2010-10-01T00:00:00UTC', processing => 'BROWSE', format=>'csv' } );
  $mech->content_unlike( qr/zip/, '2.6, 3.8: testing processing level parameter (browse only)');
   
  $mech->post_ok($surn, { 'bbox' => '-135,64.5,-135.1,64.6', end => '2010-10-01T00:00:00UTC', processing => 'L0,L1', format=>'csv' } );
  $mech->content_unlike( qr/jpg/, '2.6, 3.8: testing processing level parameter (L0, L1 only)');

  $mech->post_ok($surn, { 'bbox' => '-135,64,-133,66', start => '1998-06-01T00:00:00Z', end => '1998-06-30T11:59:59Z', processing => 'L0,L1', format=>'csv', platform=>'E2,R1' } );
  is($mech->content_type(),'text/csv', '3.9.1: csv returns text/csv content type');
  unlike($mech->content(), qr/jpg/, '2.8: testing restriction of multiple search parameters to exclude browse images');

  $mech->post_ok($surn, { 'bbox' => '-135,64,-133,66', start => '1998-06-01T00:00:00Z', end => '1998-06-30T11:59:59Z', processing => 'L0,L1', format=>'list', platform=>'E2,R1' } );
  is($mech->content(), q(E2_16687_STD_F289,E2_16687_STD_F289,E2_16687_STD_F287,E2_16687_STD_F287,E2_16687_STD_F285,E2_16687_STD_F285,E2_16687_STD_F283,E2_16687_STD_F283,R1_13778_SNB_F292,R1_13778_SNB_F284,E2_16558_STD_F291,E2_16558_STD_F291,E2_16558_STD_F289,E2_16558_STD_F289,E2_16558_STD_F287,E2_16558_STD_F287,E2_16558_STD_F285,E2_16558_STD_F285,R1_13699_SWB_F171,R1_13664_ST6_F287,R1_13664_ST6_F287,R1_13564_SNB_F292,R1_13564_SNB_F284,R1_13450_SWA_F289,R1_13442_ST3_F166,R1_13442_ST3_F166,R1_13442_ST3_F165,R1_13442_ST3_F165,R1_13442_ST3_F163,R1_13442_ST3_F163,R1_13442_ST3_F161,R1_13442_ST3_F161,R1_13442_ST3_F159,R1_13442_ST3_F159,R1_13435_SNB_F292,R1_13435_SNB_F284,),
    '2.8: tests multiple search parameters (start, end, platform, processing)');

  $mech->post_ok($jurn, { query=>'{"bbox":"-135,64,-133,66","start":"1998-06-01T00:00:00Z","end":"1998-06-30T11:59:59Z","processing":["L0","L1"],"format":"list","platform":["E2","R1"]}'} );
  is($mech->content(), q(E2_16687_STD_F289,E2_16687_STD_F289,E2_16687_STD_F287,E2_16687_STD_F287,E2_16687_STD_F285,E2_16687_STD_F285,E2_16687_STD_F283,E2_16687_STD_F283,R1_13778_SNB_F292,R1_13778_SNB_F284,E2_16558_STD_F291,E2_16558_STD_F291,E2_16558_STD_F289,E2_16558_STD_F289,E2_16558_STD_F287,E2_16558_STD_F287,E2_16558_STD_F285,E2_16558_STD_F285,R1_13699_SWB_F171,R1_13664_ST6_F287,R1_13664_ST6_F287,R1_13564_SNB_F292,R1_13564_SNB_F284,R1_13450_SWA_F289,R1_13442_ST3_F166,R1_13442_ST3_F166,R1_13442_ST3_F165,R1_13442_ST3_F165,R1_13442_ST3_F163,R1_13442_ST3_F163,R1_13442_ST3_F161,R1_13442_ST3_F161,R1_13442_ST3_F159,R1_13442_ST3_F159,R1_13435_SNB_F292,R1_13435_SNB_F284,),
    '2.8: tests multiple search parameters via JSON request (start, end, platform, processing)');

  $mech->post($surn, {'bbox' => '-135,64.5,-135.1,64.6', granule_list=>'R1_35587_SWB_F356,R1_34558_SWB_F356,R1_34601_SWB_F357', format=>'list'});
  is( $mech->content(), q(R1_34558_SWB_F356,R1_34558_SWB_F356,R1_34601_SWB_F357,R1_34601_SWB_F357,R1_35587_SWB_F356,R1_35587_SWB_F356,), '2.9.1: granule_list overrides other search params if present');

  $mech->post($surn, { granule_list=>'R1_35587_SWB_F356,R1_34558_SWB_F356,R1_34601_SWB_F357', processing => 'browse', format => 'list' });
  unlike($mech->content(), qr/zip/, '2.9.2: processing level parameter can be provided with granule list');

}

BEGIN {

our $raw_xml = q(<?xml version="1.0"?>
<rows>
<ROW><GRANULENAME>R1_35587_SWB_F356</GRANULENAME><PRODUCTNAME>R1_35587_SWB_F356</PRODUCTNAME><PLATFORM>RADARSAT-1</PLATFORM><SENSOR>SAR</SENSOR><BEAMMODETYPE>SWB</BEAMMODETYPE><BEAMMODEDESC>Radarsat-1 SCANSAR Wide Beam B SAR                                                                                                                                                                                                                              </BEAMMODEDESC><ORBIT>35587</ORBIT><PATHNUMBER>NA</PATHNUMBER><FRAMENUMBER>356</FRAMENUMBER><ACQUISITIONDATE>29-AUG-02 02.58.00.338027 PM</ACQUISITIONDATE><PROCESSINGDATE>28-NOV-10 04.52.26.673592 PM</PROCESSINGDATE><PROCESSINGTYPE>BROWSE</PROCESSINGTYPE><STARTTIME>29-AUG-02 02.56.43.339536 PM</STARTTIME><ENDTIME>29-AUG-02 02.58.00.338027 PM</ENDTIME><CENTERLAT>37.6236</CENTERLAT><CENTERLON>-133.2796</CENTERLON><NEARSTARTLAT>39.581685</NEARSTARTLAT><NEARSTARTLON>-129.992791</NEARSTARTLON><NEARENDLAT>35.055549</NEARENDLAT><NEARENDLON>-131.250025</NEARENDLON><FARSTARTLAT>40.132374</FARSTARTLAT><FARSTARTLON>-135.473428</FARSTARTLON><FARENDLAT>35.595865</FARENDLAT><FARENDLON>-136.39153</FARENDLON><FARADAYROTATION>NA</FARADAYROTATION><ASCENDINGDESCENDING>DESCENDING</ASCENDINGDESCENDING><URL>http://test-online.asf.alaska.edu:80/BROWSE/R1/R1_35587_SWB_F356.jpg</URL><BYTES>136151</BYTES><MD5SUM>d7931262cdc8d6020cce2d422d061efd</MD5SUM><GRANULEDESC>Radarsat-1 ScanSAR Data in ASF Frame Size</GRANULEDESC><GRANULETYPE>R1_SCANSAR_FRAME</GRANULETYPE><FILENAME>R1_35587_SWB_F356.jpg</FILENAME><SHAPE><SDO_GTYPE>2003</SDO_GTYPE><SDO_SRID>8307</SDO_SRID><SDO_ELEM_INFO><NUMBER>1</NUMBER><NUMBER>1003</NUMBER><NUMBER>1</NUMBER></SDO_ELEM_INFO><SDO_ORDINATES><NUMBER>-129.992791</NUMBER><NUMBER>39.581685</NUMBER><NUMBER>-135.473428</NUMBER><NUMBER>40.132374</NUMBER><NUMBER>-136.39153</NUMBER><NUMBER>35.595865</NUMBER><NUMBER>-131.250025</NUMBER><NUMBER>35.055549</NUMBER><NUMBER>-129.992791</NUMBER><NUMBER>39.581685</NUMBER></SDO_ORDINATES></SHAPE></ROW>
<ROW><GRANULENAME>R1_35587_SWB_F356</GRANULENAME><PRODUCTNAME>R1_35587_SWB_F356</PRODUCTNAME><PLATFORM>RADARSAT-1</PLATFORM><SENSOR>SAR</SENSOR><BEAMMODETYPE>SWB</BEAMMODETYPE><BEAMMODEDESC>Radarsat-1 SCANSAR Wide Beam B SAR                                                                                                                                                                                                                              </BEAMMODEDESC><ORBIT>35587</ORBIT><PATHNUMBER>NA</PATHNUMBER><FRAMENUMBER>356</FRAMENUMBER><ACQUISITIONDATE>29-AUG-02 02.58.00.338027 PM</ACQUISITIONDATE><PROCESSINGDATE>28-NOV-10 04.52.34.767383 PM</PROCESSINGDATE><PROCESSINGTYPE>L1</PROCESSINGTYPE><STARTTIME>29-AUG-02 02.56.43.339536 PM</STARTTIME><ENDTIME>29-AUG-02 02.58.00.338027 PM</ENDTIME><CENTERLAT>37.6236</CENTERLAT><CENTERLON>-133.2796</CENTERLON><NEARSTARTLAT>39.581685</NEARSTARTLAT><NEARSTARTLON>-129.992791</NEARSTARTLON><NEARENDLAT>35.055549</NEARENDLAT><NEARENDLON>-131.250025</NEARENDLON><FARSTARTLAT>40.132374</FARSTARTLAT><FARSTARTLON>-135.473428</FARSTARTLON><FARENDLAT>35.595865</FARENDLAT><FARENDLON>-136.39153</FARENDLON><FARADAYROTATION>NA</FARADAYROTATION><ASCENDINGDESCENDING>DESCENDING</ASCENDINGDESCENDING><URL>http://test-online.asf.alaska.edu:80/L1/R1/R1_35587_SWB_F356.zip</URL><BYTES>64780747</BYTES><MD5SUM>6d1e8c41d1e873aada9916a1b884b4db</MD5SUM><GRANULEDESC>Radarsat-1 ScanSAR Data in ASF Frame Size</GRANULEDESC><GRANULETYPE>R1_SCANSAR_FRAME</GRANULETYPE><FILENAME>R1_35587_SWB_F356.zip</FILENAME><SHAPE><SDO_GTYPE>2003</SDO_GTYPE><SDO_SRID>8307</SDO_SRID><SDO_ELEM_INFO><NUMBER>1</NUMBER><NUMBER>1003</NUMBER><NUMBER>1</NUMBER></SDO_ELEM_INFO><SDO_ORDINATES><NUMBER>-129.992791</NUMBER><NUMBER>39.581685</NUMBER><NUMBER>-135.473428</NUMBER><NUMBER>40.132374</NUMBER><NUMBER>-136.39153</NUMBER><NUMBER>35.595865</NUMBER><NUMBER>-131.250025</NUMBER><NUMBER>35.055549</NUMBER><NUMBER>-129.992791</NUMBER><NUMBER>39.581685</NUMBER></SDO_ORDINATES></SHAPE></ROW></rows>
);

our $file_list1 = q(R1_38175_ST2_L0_F287.zip,R1_38175_ST2_F287.zip,R1_38175_ST2_F287.jpg);
our $file_list2 = q(E2_59888_STD_F285.jpg,E2_59888_STD_F285.jpg,E2_59888_STD_F285.jpg,E2_59888_STD_F287.jpg,E2_59888_STD_F287.jpg,E2_59888_STD_F287.jpg,E2_62350_STD_F286.jpg,E2_62350_STD_F286.jpg,E2_62350_STD_F287.jpg,E2_62350_STD_F287.jpg,E2_62350_STD_F287.jpg,E2_62614_STD_F163.jpg,E2_62614_STD_F163.jpg,E2_62614_STD_F163.jpg,E2_62614_STD_F164.jpg,E2_62614_STD_F164.jpg,E2_62622_STD_F285.jpg,E2_62622_STD_F285.jpg,E2_62622_STD_F285.jpg,E2_62622_STD_F287.jpg,E2_62622_STD_F287.jpg,E2_62622_STD_F287.jpg,E2_62886_STD_F163.jpg,E2_62886_STD_F163.jpg,E2_62886_STD_F163.jpg,E2_62886_STD_F164.jpg,E2_62886_STD_F164.jpg,E2_62894_STD_F285.jpg,E2_62894_STD_F285.jpg,E2_62894_STD_F285.jpg,E2_62894_STD_F287.jpg,E2_62894_STD_F287.jpg,E2_62894_STD_F287.jpg,E2_63387_STD_F163.jpg,E2_63387_STD_F163.jpg,E2_63387_STD_F163.jpg,E2_63395_STD_F285.jpg,E2_63395_STD_F285.jpg,E2_63395_STD_F285.jpg,E2_63395_STD_F287.jpg,E2_63395_STD_F287.jpg,E2_63395_STD_F287.jpg,E2_63888_STD_F163.jpg,E2_63888_STD_F163.jpg,E2_63888_STD_F163.jpg,E2_63888_STD_F164.jpg,E2_63888_STD_F164.jpg,E2_63896_STD_F285.jpg,E2_63896_STD_F285.jpg,E2_63896_STD_F285.jpg,E2_63896_STD_F287.jpg,E2_63896_STD_F287.jpg,E2_63896_STD_F287.jpg,E2_64661_STD_F163.jpg,E2_64661_STD_F163.jpg,E2_64661_STD_F163.jpg,E2_64890_STD_F163.jpg,E2_64890_STD_F163.jpg,E2_64890_STD_F163.jpg,E2_64898_STD_F287.jpg,E2_64898_STD_F287.jpg,E2_64898_STD_F287.jpg,E2_65127_STD_F287.jpg,E2_65127_STD_F287.jpg,E2_65127_STD_F287.jpg,E2_65356_STD_F287.jpg,E2_65356_STD_F287.jpg,E2_65356_STD_F287.jpg,E2_65391_STD_F163.jpg,E2_65391_STD_F163.jpg,E2_65391_STD_F163.jpg,E2_65399_STD_F287.jpg,E2_65399_STD_F287.jpg,E2_65399_STD_F287.jpg,E2_66129_STD_F287.jpg,E2_66129_STD_F287.jpg,E2_66129_STD_F287.jpg,E2_66859_STD_F287.jpg,E2_66859_STD_F287.jpg,E2_66859_STD_F287.jpg,E2_66902_STD_F287.jpg,E2_66902_STD_F287.jpg,E2_66902_STD_F287.jpg,E2_67632_STD_F286.jpg,E2_67632_STD_F286.jpg,E2_67667_STD_F163.jpg,E2_67667_STD_F163.jpg,E2_67667_STD_F163.jpg,E2_67853_STD_F163.jpg,E2_67853_STD_F163.jpg,E2_67853_STD_F163.jpg,E2_67853_STD_F164.jpg,E2_67853_STD_F164.jpg,E2_67853_STD_F165.jpg,E2_67853_STD_F165.jpg,E2_67853_STD_F165.jpg,E2_67861_STD_F287.jpg,E2_67861_STD_F287.jpg,E2_67861_STD_F287.jpg,E2_68125_STD_F163.jpg);

our $file_list_json = q({"products":["E2_59888_STD_F285.jpg","E2_59888_STD_F285.jpg","E2_59888_STD_F285.jpg","E2_59888_STD_F287.jpg","E2_59888_STD_F287.jpg","E2_59888_STD_F287.jpg","E2_62350_STD_F286.jpg","E2_62350_STD_F286.jpg","E2_62350_STD_F287.jpg","E2_62350_STD_F287.jpg","E2_62350_STD_F287.jpg","E2_62614_STD_F163.jpg","E2_62614_STD_F163.jpg","E2_62614_STD_F163.jpg","E2_62614_STD_F164.jpg","E2_62614_STD_F164.jpg","E2_62622_STD_F285.jpg","E2_62622_STD_F285.jpg","E2_62622_STD_F285.jpg","E2_62622_STD_F287.jpg","E2_62622_STD_F287.jpg","E2_62622_STD_F287.jpg","E2_62886_STD_F163.jpg","E2_62886_STD_F163.jpg","E2_62886_STD_F163.jpg","E2_62886_STD_F164.jpg","E2_62886_STD_F164.jpg","E2_62894_STD_F285.jpg","E2_62894_STD_F285.jpg","E2_62894_STD_F285.jpg","E2_62894_STD_F287.jpg","E2_62894_STD_F287.jpg","E2_62894_STD_F287.jpg","E2_63387_STD_F163.jpg","E2_63387_STD_F163.jpg","E2_63387_STD_F163.jpg","E2_63395_STD_F285.jpg","E2_63395_STD_F285.jpg","E2_63395_STD_F285.jpg","E2_63395_STD_F287.jpg","E2_63395_STD_F287.jpg","E2_63395_STD_F287.jpg","E2_63888_STD_F163.jpg","E2_63888_STD_F163.jpg","E2_63888_STD_F163.jpg","E2_63888_STD_F164.jpg","E2_63888_STD_F164.jpg","E2_63896_STD_F285.jpg","E2_63896_STD_F285.jpg","E2_63896_STD_F285.jpg","E2_63896_STD_F287.jpg","E2_63896_STD_F287.jpg","E2_63896_STD_F287.jpg","E2_64661_STD_F163.jpg","E2_64661_STD_F163.jpg","E2_64661_STD_F163.jpg","E2_64890_STD_F163.jpg","E2_64890_STD_F163.jpg","E2_64890_STD_F163.jpg","E2_64898_STD_F287.jpg","E2_64898_STD_F287.jpg","E2_64898_STD_F287.jpg","E2_65127_STD_F287.jpg","E2_65127_STD_F287.jpg","E2_65127_STD_F287.jpg","E2_65356_STD_F287.jpg","E2_65356_STD_F287.jpg","E2_65356_STD_F287.jpg","E2_65391_STD_F163.jpg","E2_65391_STD_F163.jpg","E2_65391_STD_F163.jpg","E2_65399_STD_F287.jpg","E2_65399_STD_F287.jpg","E2_65399_STD_F287.jpg","E2_66129_STD_F287.jpg","E2_66129_STD_F287.jpg","E2_66129_STD_F287.jpg","E2_66859_STD_F287.jpg","E2_66859_STD_F287.jpg","E2_66859_STD_F287.jpg","E2_66902_STD_F287.jpg","E2_66902_STD_F287.jpg","E2_66902_STD_F287.jpg","E2_67632_STD_F286.jpg","E2_67632_STD_F286.jpg","E2_67667_STD_F163.jpg","E2_67667_STD_F163.jpg","E2_67667_STD_F163.jpg","E2_67853_STD_F163.jpg","E2_67853_STD_F163.jpg","E2_67853_STD_F163.jpg","E2_67853_STD_F164.jpg","E2_67853_STD_F164.jpg","E2_67853_STD_F165.jpg","E2_67853_STD_F165.jpg","E2_67853_STD_F165.jpg","E2_67861_STD_F287.jpg","E2_67861_STD_F287.jpg","E2_67861_STD_F287.jpg","E2_68125_STD_F163.jpg"],"format":"list"});

our $broken_json = q({"products":["abc"});

}

done_testing();
